"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/pocketbase";
exports.ids = ["vendor-chunks/pocketbase"];
exports.modules = {

/***/ "(ssr)/./node_modules/pocketbase/dist/pocketbase.es.mjs":
/*!********************************************************!*\
  !*** ./node_modules/pocketbase/dist/pocketbase.es.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncAuthStore: () => (/* binding */ AsyncAuthStore),\n/* harmony export */   BaseAuthStore: () => (/* binding */ BaseAuthStore),\n/* harmony export */   BatchService: () => (/* binding */ BatchService),\n/* harmony export */   ClientResponseError: () => (/* binding */ ClientResponseError),\n/* harmony export */   CollectionService: () => (/* binding */ CollectionService),\n/* harmony export */   CrudService: () => (/* binding */ CrudService),\n/* harmony export */   HealthService: () => (/* binding */ HealthService),\n/* harmony export */   LocalAuthStore: () => (/* binding */ LocalAuthStore),\n/* harmony export */   LogService: () => (/* binding */ LogService),\n/* harmony export */   RealtimeService: () => (/* binding */ RealtimeService),\n/* harmony export */   RecordService: () => (/* binding */ RecordService),\n/* harmony export */   SubBatchService: () => (/* binding */ SubBatchService),\n/* harmony export */   cookieParse: () => (/* binding */ cookieParse),\n/* harmony export */   cookieSerialize: () => (/* binding */ cookieSerialize),\n/* harmony export */   \"default\": () => (/* binding */ Client),\n/* harmony export */   getTokenPayload: () => (/* binding */ getTokenPayload),\n/* harmony export */   isTokenExpired: () => (/* binding */ isTokenExpired),\n/* harmony export */   normalizeUnknownQueryParams: () => (/* binding */ normalizeUnknownQueryParams),\n/* harmony export */   serializeQueryParams: () => (/* binding */ serializeQueryParams)\n/* harmony export */ });\nclass ClientResponseError extends Error{constructor(e){super(\"ClientResponseError\"),this.url=\"\",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,ClientResponseError.prototype),null!==e&&\"object\"==typeof e&&(this.url=\"string\"==typeof e.url?e.url:\"\",this.status=\"number\"==typeof e.status?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,null!==e.response&&\"object\"==typeof e.response?this.response=e.response:null!==e.data&&\"object\"==typeof e.data?this.response=e.data:this.response={}),this.originalError||e instanceof ClientResponseError||(this.originalError=e),\"undefined\"!=typeof DOMException&&e instanceof DOMException&&(this.isAbort=!0),this.name=\"ClientResponseError \"+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message=\"The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.\":this.originalError?.cause?.message?.includes(\"ECONNREFUSED ::1\")?this.message=\"Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).\":this.message=\"Something went wrong while processing your request.\")}get data(){return this.response}toJSON(){return{...this}}}const e=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function cookieParse(e,t){const s={};if(\"string\"!=typeof e)return s;const i=Object.assign({},t||{}).decode||defaultDecode;let n=0;for(;n<e.length;){const t=e.indexOf(\"=\",n);if(-1===t)break;let r=e.indexOf(\";\",n);if(-1===r)r=e.length;else if(r<t){n=e.lastIndexOf(\";\",t-1)+1;continue}const o=e.slice(n,t).trim();if(void 0===s[o]){let n=e.slice(t+1,r).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{s[o]=i(n)}catch(e){s[o]=n}}n=r+1}return s}function cookieSerialize(t,s,i){const n=Object.assign({},i||{}),r=n.encode||defaultEncode;if(!e.test(t))throw new TypeError(\"argument name is invalid\");const o=r(s);if(o&&!e.test(o))throw new TypeError(\"argument val is invalid\");let a=t+\"=\"+o;if(null!=n.maxAge){const e=n.maxAge-0;if(isNaN(e)||!isFinite(e))throw new TypeError(\"option maxAge is invalid\");a+=\"; Max-Age=\"+Math.floor(e)}if(n.domain){if(!e.test(n.domain))throw new TypeError(\"option domain is invalid\");a+=\"; Domain=\"+n.domain}if(n.path){if(!e.test(n.path))throw new TypeError(\"option path is invalid\");a+=\"; Path=\"+n.path}if(n.expires){if(!function isDate(e){return\"[object Date]\"===Object.prototype.toString.call(e)||e instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError(\"option expires is invalid\");a+=\"; Expires=\"+n.expires.toUTCString()}if(n.httpOnly&&(a+=\"; HttpOnly\"),n.secure&&(a+=\"; Secure\"),n.priority){switch(\"string\"==typeof n.priority?n.priority.toLowerCase():n.priority){case\"low\":a+=\"; Priority=Low\";break;case\"medium\":a+=\"; Priority=Medium\";break;case\"high\":a+=\"; Priority=High\";break;default:throw new TypeError(\"option priority is invalid\")}}if(n.sameSite){switch(\"string\"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+=\"; SameSite=Strict\";break;case\"lax\":a+=\"; SameSite=Lax\";break;case\"strict\":a+=\"; SameSite=Strict\";break;case\"none\":a+=\"; SameSite=None\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return a}function defaultDecode(e){return-1!==e.indexOf(\"%\")?decodeURIComponent(e):e}function defaultEncode(e){return encodeURIComponent(e)}const t=\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product||\"undefined\"!=typeof global&&global.HermesInternal;let s;function getTokenPayload(e){if(e)try{const t=decodeURIComponent(s(e.split(\".\")[1]).split(\"\").map((function(e){return\"%\"+(\"00\"+e.charCodeAt(0).toString(16)).slice(-2)})).join(\"\"));return JSON.parse(t)||{}}catch(e){}return{}}function isTokenExpired(e,t=0){let s=getTokenPayload(e);return!(Object.keys(s).length>0&&(!s.exp||s.exp-t>Date.now()/1e3))}s=\"function\"!=typeof atob||t?e=>{let t=String(e).replace(/=+$/,\"\");if(t.length%4==1)throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var s,i,n=0,r=0,o=\"\";i=t.charAt(r++);~i&&(s=n%4?64*s+i:i,n++%4)?o+=String.fromCharCode(255&s>>(-2*n&6)):0)i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(i);return o}:atob;const i=\"pb_auth\";class BaseAuthStore{constructor(){this.baseToken=\"\",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!isTokenExpired(this.token)}get isSuperuser(){let e=getTokenPayload(this.token);return\"auth\"==e.type&&(\"_superusers\"==this.record?.collectionName||!this.record?.collectionName&&\"pbc_3142635823\"==e.collectionId)}get isAdmin(){return console.warn(\"Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName\"),this.isSuperuser}get isAuthRecord(){return console.warn(\"Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName\"),\"auth\"==getTokenPayload(this.token).type&&!this.isSuperuser}save(e,t){this.baseToken=e||\"\",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken=\"\",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=i){const s=cookieParse(e||\"\")[t]||\"\";let n={};try{n=JSON.parse(s),(null===typeof n||\"object\"!=typeof n||Array.isArray(n))&&(n={})}catch(e){}this.save(n.token||\"\",n.record||n.model||null)}exportToCookie(e,t=i){const s={secure:!0,sameSite:!0,httpOnly:!0,path:\"/\"},n=getTokenPayload(this.token);s.expires=n?.exp?new Date(1e3*n.exp):new Date(\"1970-01-01\"),e=Object.assign({},s,e);const r={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=cookieSerialize(t,JSON.stringify(r),e);const a=\"undefined\"!=typeof Blob?new Blob([o]).size:o.length;if(r.record&&a>4096){r.record={id:r.record?.id,email:r.record?.email};const s=[\"collectionId\",\"collectionName\",\"verified\"];for(const e in this.record)s.includes(e)&&(r.record[e]=this.record[e]);o=cookieSerialize(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let t=this._onChangeCallbacks.length-1;t>=0;t--)if(this._onChangeCallbacks[t]==e)return delete this._onChangeCallbacks[t],void this._onChangeCallbacks.splice(t,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class LocalAuthStore extends BaseAuthStore{constructor(e=\"pocketbase_auth\"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||\"\"}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(\"undefined\"!=typeof window&&window?.localStorage){const t=window.localStorage.getItem(e)||\"\";try{return JSON.parse(t)}catch(e){return t}}return this.storageFallback[e]}_storageSet(e,t){if(\"undefined\"!=typeof window&&window?.localStorage){let s=t;\"string\"!=typeof t&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){\"undefined\"!=typeof window&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){\"undefined\"!=typeof window&&window?.localStorage&&window.addEventListener&&window.addEventListener(\"storage\",(e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||\"\",t.record||t.model||null)}))}}class BaseService{constructor(e){this.client=e}}class SettingsService extends BaseService{async getAll(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/settings\",e)}async update(e,t){return t=Object.assign({method:\"PATCH\",body:e},t),this.client.send(\"/api/settings\",t)}async testS3(e=\"storage\",t){return t=Object.assign({method:\"POST\",body:{filesystem:e}},t),this.client.send(\"/api/settings/test/s3\",t).then((()=>!0))}async testEmail(e,t,s,i){return i=Object.assign({method:\"POST\",body:{email:t,template:s,collection:e}},i),this.client.send(\"/api/settings/test/email\",i).then((()=>!0))}async generateAppleClientSecret(e,t,s,i,n,r){return r=Object.assign({method:\"POST\",body:{clientId:e,teamId:t,keyId:s,privateKey:i,duration:n}},r),this.client.send(\"/api/settings/apple/generate-client-secret\",r)}}const n=[\"requestKey\",\"$cancelKey\",\"$autoCancel\",\"fetch\",\"headers\",\"body\",\"query\",\"params\",\"cache\",\"credentials\",\"headers\",\"integrity\",\"keepalive\",\"method\",\"mode\",\"redirect\",\"referrer\",\"referrerPolicy\",\"signal\",\"window\"];function normalizeUnknownQueryParams(e){if(e){e.query=e.query||{};for(let t in e)n.includes(t)||(e.query[t]=e[t],delete e[t])}}function serializeQueryParams(e){const t=[];for(const s in e){if(null===e[s])continue;const i=e[s],n=encodeURIComponent(s);if(Array.isArray(i))for(const e of i)t.push(n+\"=\"+encodeURIComponent(e));else i instanceof Date?t.push(n+\"=\"+encodeURIComponent(i.toISOString())):null!==typeof i&&\"object\"==typeof i?t.push(n+\"=\"+encodeURIComponent(JSON.stringify(i))):t.push(n+\"=\"+encodeURIComponent(i))}return t.join(\"&\")}class RealtimeService extends BaseService{constructor(){super(...arguments),this.clientId=\"\",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){if(!e)throw new Error(\"topic must be set.\");let i=e;if(s){normalizeUnknownQueryParams(s=Object.assign({},s));const e=\"options=\"+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));i+=(i.includes(\"?\")?\"&\":\"?\")+e}const listener=function(e){const s=e;let i;try{i=JSON.parse(s?.data)}catch{}t(i||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(listener),this.isConnected?1===this.subscriptions[i].length?await this.submitSubscriptions():this.eventSource?.addEventListener(i,listener):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,listener)}async unsubscribe(e){let t=!1;if(e){const s=this.getSubscriptionsByTopic(e);for(let e in s)if(this.hasSubscriptionListeners(e)){for(let t of this.subscriptions[e])this.eventSource?.removeEventListener(e,t);delete this.subscriptions[e],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let s in this.subscriptions)if((s+\"?\").startsWith(e)){t=!0;for(let e of this.subscriptions[s])this.eventSource?.removeEventListener(s,e);delete this.subscriptions[s]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let s=!1;const i=this.getSubscriptionsByTopic(e);for(let e in i){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)continue;let i=!1;for(let s=this.subscriptions[e].length-1;s>=0;s--)this.subscriptions[e][s]===t&&(i=!0,delete this.subscriptions[e][s],this.subscriptions[e].splice(s,1),this.eventSource?.removeEventListener(e,t));i&&(this.subscriptions[e].length||delete this.subscriptions[e],s||this.hasSubscriptionListeners(e)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let e in this.subscriptions)if(this.subscriptions[e]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send(\"/api/realtime\",{method:\"POST\",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return\"realtime_\"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes(\"?\")?e:e+\"?\";for(let s in this.subscriptions)(s+\"?\").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(new Error(\"EventSource connect took too long.\"))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL(\"/api/realtime\")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error(\"Failed to establish realtime connection.\"))},this.eventSource.addEventListener(\"PB_CONNECT\",(e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then((async()=>{let e=3;for(;this.hasUnsentSubscriptions()&&e>0;)e--,await this.submitSubscriptions()})).then((()=>{for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const t=this.getSubscriptionsByTopic(\"PB_CONNECT\");for(let s in t)for(let i of t[s])i(e)})).catch((e=>{this.clientId=\"\",this.connectErrorHandler(e)}))}))}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let t of this.pendingConnects)t.reject(new ClientResponseError(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId=\"\",!e){this.reconnectAttempts=0;for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[]}}}class CrudService extends BaseService{decode(e){return e}async getFullList(e,t){if(\"number\"==typeof e)return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:\"GET\"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then((e=>(e.items=e.items?.map((e=>this.decode(e)))||[],e)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:\"one_by_filter_\"+this.baseCrudPath+\"_\"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((e=>{if(!e?.items?.length)throw new ClientResponseError({status:404,response:{code:404,message:\"The requested resource wasn't found.\",data:{}}});return e.items[0]}))}async getOne(e,t){if(!e)throw new ClientResponseError({url:this.client.buildURL(this.baseCrudPath+\"/\"),status:404,response:{code:404,message:\"Missing required record id.\",data:{}}});return t=Object.assign({method:\"GET\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),t).then((e=>this.decode(e)))}async create(e,t){return t=Object.assign({method:\"POST\",body:e},t),this.client.send(this.baseCrudPath,t).then((e=>this.decode(e)))}async update(e,t,s){return s=Object.assign({method:\"PATCH\",body:t},s),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),s).then((e=>this.decode(e)))}async delete(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],request=async i=>this.getList(i,e||500,t).then((e=>{const t=e.items;return s=s.concat(t),t.length==e.perPage?request(i+1):s}));return request(1)}}function normalizeLegacyOptionsArgs(e,t,s,i){const n=void 0!==i;return n||void 0!==s?n?(console.warn(e),t.body=Object.assign({},t.body,s),t.query=Object.assign({},t.query,i),t):Object.assign(t,s):t}function resetAutoRefresh(e){e._resetAutoRefresh?.()}class RecordService extends CrudService{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+\"/records\"}get baseCollectionPath(){return\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return\"_superusers\"==this.collectionIdOrName||\"_pbc_2773867675\"==this.collectionIdOrName}async subscribe(e,t,s){if(!e)throw new Error(\"Missing topic.\");if(!t)throw new Error(\"Missing subscription callback.\");return this.client.realtime.subscribe(this.collectionIdOrName+\"/\"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+\"/\"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(\"number\"==typeof e)return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then((e=>{if(this.client.authStore.record?.id===e?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let t=Object.assign({},this.client.authStore.record.expand),s=Object.assign({},this.client.authStore.record,e);t&&(s.expand=Object.assign(t,e.expand)),this.client.authStore.save(this.client.authStore.token,s)}return e}))}async delete(e,t){return super.delete(e,t).then((t=>(!t||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),t)))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||\"\",record:t})}async listAuthMethods(e){return e=Object.assign({method:\"GET\",fields:\"mfa,otp,password,oauth2\"},e),this.client.send(this.baseCollectionPath+\"/auth-methods\",e)}async authWithPassword(e,t,s){let i;s=Object.assign({method:\"POST\",body:{identity:e,password:t}},s),this.isSuperusers&&(i=s.autoRefreshThreshold,delete s.autoRefreshThreshold,s.autoRefresh||resetAutoRefresh(this.client));let n=await this.client.send(this.baseCollectionPath+\"/auth-with-password\",s);return n=this.authResponse(n),i&&this.isSuperusers&&function registerAutoRefresh(e,t,s,i){resetAutoRefresh(e);const n=e.beforeSend,r=e.authStore.record,o=e.authStore.onChange(((t,s)=>{(!t||s?.id!=r?.id||(s?.collectionId||r?.collectionId)&&s?.collectionId!=r?.collectionId)&&resetAutoRefresh(e)}));e._resetAutoRefresh=function(){o(),e.beforeSend=n,delete e._resetAutoRefresh},e.beforeSend=async(r,o)=>{const a=e.authStore.token;if(o.query?.autoRefresh)return n?n(r,o):{url:r,sendOptions:o};let c=e.authStore.isValid;if(c&&isTokenExpired(e.authStore.token,t))try{await s()}catch(e){c=!1}c||await i();const l=o.headers||{};for(let t in l)if(\"authorization\"==t.toLowerCase()&&a==l[t]&&e.authStore.token){l[t]=e.authStore.token;break}return o.headers=l,n?n(r,o):{url:r,sendOptions:o}}}(this.client,i,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},s)))),n}async authWithOAuth2Code(e,t,s,i,n,r,o){let a={method:\"POST\",body:{provider:e,code:t,codeVerifier:s,redirectURL:i,createData:n}};return a=normalizeLegacyOptionsArgs(\"This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).\",a,r,o),this.client.send(this.baseCollectionPath+\"/auth-with-oauth2\",a).then((e=>this.authResponse(e)))}authWithOAuth2(...e){if(e.length>1||\"string\"==typeof e?.[0])return console.warn(\"PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration.\"),this.authWithOAuth2Code(e?.[0]||\"\",e?.[1]||\"\",e?.[2]||\"\",e?.[3]||\"\",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{};let s=null;t.urlCallback||(s=openBrowserPopup(void 0));const i=new RealtimeService(this.client);function cleanup(){s?.close(),i.unsubscribe()}const n={},r=t.requestKey;return r&&(n.requestKey=r),this.listAuthMethods(n).then((e=>{const n=e.oauth2.providers.find((e=>e.name===t.provider));if(!n)throw new ClientResponseError(new Error(`Missing or invalid provider \"${t.provider}\".`));const o=this.client.buildURL(\"/api/oauth2-redirect\"),a=r?this.client.cancelControllers?.[r]:void 0;return a&&(a.signal.onabort=()=>{cleanup()}),new Promise((async(e,r)=>{try{await i.subscribe(\"@oauth2\",(async s=>{const c=i.clientId;try{if(!s.state||c!==s.state)throw new Error(\"State parameters don't match.\");if(s.error||!s.code)throw new Error(\"OAuth2 redirect error or missing code: \"+s.error);const i=Object.assign({},t);delete i.provider,delete i.scopes,delete i.createData,delete i.urlCallback,a?.signal?.onabort&&(a.signal.onabort=null);const r=await this.authWithOAuth2Code(n.name,s.code,n.codeVerifier,o,t.createData,i);e(r)}catch(e){r(new ClientResponseError(e))}cleanup()}));const c={state:i.clientId};t.scopes?.length&&(c.scope=t.scopes.join(\" \"));const l=this._replaceQueryParams(n.authURL+o,c);let h=t.urlCallback||function(e){s?s.location.href=e:s=openBrowserPopup(e)};await h(l)}catch(e){cleanup(),r(new ClientResponseError(e))}}))})).catch((e=>{throw cleanup(),e}))}async authRefresh(e,t){let s={method:\"POST\"};return s=normalizeLegacyOptionsArgs(\"This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).\",s,e,t),this.client.send(this.baseCollectionPath+\"/auth-refresh\",s).then((e=>this.authResponse(e)))}async requestPasswordReset(e,t,s){let i={method:\"POST\",body:{email:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-password-reset\",i).then((()=>!0))}async confirmPasswordReset(e,t,s,i,n){let r={method:\"POST\",body:{token:e,password:t,passwordConfirm:s}};return r=normalizeLegacyOptionsArgs(\"This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).\",r,i,n),this.client.send(this.baseCollectionPath+\"/confirm-password-reset\",r).then((()=>!0))}async requestVerification(e,t,s){let i={method:\"POST\",body:{email:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-verification\",i).then((()=>!0))}async confirmVerification(e,t,s){let i={method:\"POST\",body:{token:e}};return i=normalizeLegacyOptionsArgs(\"This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/confirm-verification\",i).then((()=>{const t=getTokenPayload(e),s=this.client.authStore.record;return s&&!s.verified&&s.id===t.id&&s.collectionId===t.collectionId&&(s.verified=!0,this.client.authStore.save(this.client.authStore.token,s)),!0}))}async requestEmailChange(e,t,s){let i={method:\"POST\",body:{newEmail:e}};return i=normalizeLegacyOptionsArgs(\"This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).\",i,t,s),this.client.send(this.baseCollectionPath+\"/request-email-change\",i).then((()=>!0))}async confirmEmailChange(e,t,s,i){let n={method:\"POST\",body:{token:e,password:t}};return n=normalizeLegacyOptionsArgs(\"This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).\",n,s,i),this.client.send(this.baseCollectionPath+\"/confirm-email-change\",n).then((()=>{const t=getTokenPayload(e),s=this.client.authStore.record;return s&&s.id===t.id&&s.collectionId===t.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection(\"_externalAuths\").getFullList(Object.assign({},t,{filter:this.client.filter(\"recordRef = {:id}\",{id:e})}))}async unlinkExternalAuth(e,t,s){const i=await this.client.collection(\"_externalAuths\").getFirstListItem(this.client.filter(\"recordRef = {:recordId} && provider = {:provider}\",{recordId:e,provider:t}));return this.client.collection(\"_externalAuths\").delete(i.id,s).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:\"POST\",body:{email:e}},t),this.client.send(this.baseCollectionPath+\"/request-otp\",t)}async authWithOTP(e,t,s){return s=Object.assign({method:\"POST\",body:{otpId:e,password:t}},s),this.client.send(this.baseCollectionPath+\"/auth-with-otp\",s).then((e=>this.authResponse(e)))}async impersonate(e,t,s){(s=Object.assign({method:\"POST\",body:{duration:t}},s)).headers=s.headers||{},s.headers.Authorization||(s.headers.Authorization=this.client.authStore.token);const i=new Client(this.client.baseURL,new BaseAuthStore,this.client.lang),n=await i.send(this.baseCollectionPath+\"/impersonate/\"+encodeURIComponent(e),s);return i.authStore.save(n?.token,this.decode(n?.record||{})),i}_replaceQueryParams(e,t={}){let s=e,i=\"\";e.indexOf(\"?\")>=0&&(s=e.substring(0,e.indexOf(\"?\")),i=e.substring(e.indexOf(\"?\")+1));const n={},r=i.split(\"&\");for(const e of r){if(\"\"==e)continue;const t=e.split(\"=\");n[decodeURIComponent(t[0].replace(/\\+/g,\" \"))]=decodeURIComponent((t[1]||\"\").replace(/\\+/g,\" \"))}for(let e in t)t.hasOwnProperty(e)&&(null==t[e]?delete n[e]:n[e]=t[e]);i=\"\";for(let e in n)n.hasOwnProperty(e)&&(\"\"!=i&&(i+=\"&\"),i+=encodeURIComponent(e.replace(/%20/g,\"+\"))+\"=\"+encodeURIComponent(n[e].replace(/%20/g,\"+\")));return\"\"!=i?s+\"?\"+i:s}}function openBrowserPopup(e){if(\"undefined\"==typeof window||!window?.open)throw new ClientResponseError(new Error(\"Not in a browser context - please pass a custom urlCallback function.\"));let t=1024,s=768,i=window.innerWidth,n=window.innerHeight;t=t>i?i:t,s=s>n?n:s;let r=i/2-t/2,o=n/2-s/2;return window.open(e,\"popup_window\",\"width=\"+t+\",height=\"+s+\",top=\"+o+\",left=\"+r+\",resizable,menubar=no\")}class CollectionService extends CrudService{get baseCrudPath(){return\"/api/collections\"}async import(e,t=!1,s){return s=Object.assign({method:\"PUT\",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+\"/import\",s).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:\"GET\"},e),this.client.send(this.baseCrudPath+\"/meta/scaffolds\",e)}async truncate(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(this.baseCrudPath+\"/\"+encodeURIComponent(e)+\"/truncate\",t).then((()=>!0))}}class LogService extends BaseService{async getList(e=1,t=30,s){return(s=Object.assign({method:\"GET\"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(\"/api/logs\",s)}async getOne(e,t){if(!e)throw new ClientResponseError({url:this.client.buildURL(\"/api/logs/\"),status:404,response:{code:404,message:\"Missing required log id.\",data:{}}});return t=Object.assign({method:\"GET\"},t),this.client.send(\"/api/logs/\"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/logs/stats\",e)}}class HealthService extends BaseService{async check(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/health\",e)}}class FileService extends BaseService{getUrl(e,t,s={}){return console.warn(\"Please replace pb.files.getUrl() with pb.files.getURL()\"),this.getURL(e,t,s)}getURL(e,t,s={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return\"\";const i=[];i.push(\"api\"),i.push(\"files\"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let n=this.client.buildURL(i.join(\"/\"));if(Object.keys(s).length){!1===s.download&&delete s.download;const e=new URLSearchParams(s);n+=(n.includes(\"?\")?\"&\":\"?\")+e}return n}async getToken(e){return e=Object.assign({method:\"POST\"},e),this.client.send(\"/api/files/token\",e).then((e=>e?.token||\"\"))}}class BackupService extends BaseService{async getFullList(e){return e=Object.assign({method:\"GET\"},e),this.client.send(\"/api/backups\",e)}async create(e,t){return t=Object.assign({method:\"POST\",body:{name:e}},t),this.client.send(\"/api/backups\",t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:\"POST\",body:e},t),this.client.send(\"/api/backups/upload\",t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:\"DELETE\"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:\"POST\"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn(\"Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()\"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}function isFile(e){return\"undefined\"!=typeof Blob&&e instanceof Blob||\"undefined\"!=typeof File&&e instanceof File||null!==e&&\"object\"==typeof e&&e.uri&&(\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product||\"undefined\"!=typeof global&&global.HermesInternal)}function isFormData(e){return e&&(\"FormData\"===e.constructor.name||\"undefined\"!=typeof FormData&&e instanceof FormData)}function hasFileField(e){for(const t in e){const s=Array.isArray(e[t])?e[t]:[e[t]];for(const e of s)if(isFile(e))return!0}return!1}const r=/^[\\-\\.\\d]+$/;function inferFormDataValue(e){if(\"string\"!=typeof e)return e;if(\"true\"==e)return!0;if(\"false\"==e)return!1;if((\"-\"===e[0]||e[0]>=\"0\"&&e[0]<=\"9\")&&r.test(e)){let t=+e;if(\"\"+t===e)return t}return e}class BatchService extends BaseService{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new SubBatchService(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,s=[];for(let e=0;e<this.requests.length;e++){const i=this.requests[e];if(s.push({method:i.method,url:i.url,headers:i.headers,body:i.json}),i.files)for(let s in i.files){const n=i.files[s]||[];for(let i of n)t.append(\"requests.\"+e+\".\"+s,i)}}return t.append(\"@jsonPayload\",JSON.stringify({requests:s})),e=Object.assign({method:\"POST\",body:t},e),this.client.send(\"/api/batch\",e)}}class SubBatchService{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const s={method:\"PUT\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records\"};this.prepareRequest(s,t),this.requests.push(s)}create(e,t){t=Object.assign({body:e||{}},t);const s={method:\"POST\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records\"};this.prepareRequest(s,t),this.requests.push(s)}update(e,t,s){s=Object.assign({body:t||{}},s);const i={method:\"PATCH\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records/\"+encodeURIComponent(e)};this.prepareRequest(i,s),this.requests.push(i)}delete(e,t){t=Object.assign({},t);const s={method:\"DELETE\",url:\"/api/collections/\"+encodeURIComponent(this.collectionIdOrName)+\"/records/\"+encodeURIComponent(e)};this.prepareRequest(s,t),this.requests.push(s)}prepareRequest(e,t){if(normalizeUnknownQueryParams(t),e.headers=t.headers,e.json={},e.files={},void 0!==t.query){const s=serializeQueryParams(t.query);s&&(e.url+=(e.url.includes(\"?\")?\"&\":\"?\")+s)}let s=t.body;isFormData(s)&&(s=function convertFormDataToObject(e){let t={};return e.forEach(((e,s)=>{if(\"@jsonPayload\"===s&&\"string\"==typeof e)try{let s=JSON.parse(e);Object.assign(t,s)}catch(e){console.warn(\"@jsonPayload error:\",e)}else void 0!==t[s]?(Array.isArray(t[s])||(t[s]=[t[s]]),t[s].push(inferFormDataValue(e))):t[s]=inferFormDataValue(e)})),t}(s));for(const t in s){const i=s[t];if(isFile(i))e.files[t]=e.files[t]||[],e.files[t].push(i);else if(Array.isArray(i)){const s=[],n=[];for(const e of i)isFile(e)?s.push(e):n.push(e);if(s.length>0&&s.length==i.length){e.files[t]=e.files[t]||[];for(let i of s)e.files[t].push(i)}else if(e.json[t]=n,s.length>0){let i=t;t.startsWith(\"+\")||t.endsWith(\"+\")||(i+=\"+\"),e.files[i]=e.files[i]||[];for(let t of s)e.files[i].push(t)}}else e.json[t]=i}}}class Client{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e=\"/\",t,s=\"en-US\"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=s,t?this.authStore=t:\"undefined\"!=typeof window&&window.Deno?this.authStore=new BaseAuthStore:this.authStore=new LocalAuthStore,this.collections=new CollectionService(this),this.files=new FileService(this),this.logs=new LogService(this),this.settings=new SettingsService(this),this.realtime=new RealtimeService(this),this.health=new HealthService(this),this.backups=new BackupService(this)}get admins(){return this.collection(\"_superusers\")}createBatch(){return new BatchService(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new RecordService(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let i=t[s];switch(typeof i){case\"boolean\":case\"number\":i=\"\"+i;break;case\"string\":i=\"'\"+i.replace(/'/g,\"\\\\'\")+\"'\";break;default:i=null===i?\"null\":i instanceof Date?\"'\"+i.toISOString().replace(\"T\",\" \")+\"'\":\"'\"+JSON.stringify(i).replace(/'/g,\"\\\\'\")+\"'\"}e=e.replaceAll(\"{:\"+s+\"}\",i)}return e}getFileUrl(e,t,s={}){return console.warn(\"Please replace pb.getFileUrl() with pb.files.getURL()\"),this.files.getURL(e,t,s)}buildUrl(e){return console.warn(\"Please replace pb.buildUrl() with pb.buildURL()\"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return\"undefined\"==typeof window||!window.location||t.startsWith(\"https://\")||t.startsWith(\"http://\")||(t=window.location.origin?.endsWith(\"/\")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||\"\",this.baseURL.startsWith(\"/\")||(t+=window.location.pathname||\"/\",t+=t.endsWith(\"/\")?\"\":\"/\"),t+=this.baseURL),e&&(t+=t.endsWith(\"/\")?\"\":\"/\",t+=e.startsWith(\"/\")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildURL(e);if(this.beforeSend){const e=Object.assign({},await this.beforeSend(s,t));void 0!==e.url||void 0!==e.options?(s=e.url||s,t=e.options||t):Object.keys(e).length&&(t=e,console?.warn&&console.warn(\"Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`.\"))}if(void 0!==t.query){const e=serializeQueryParams(t.query);e&&(s+=(s.includes(\"?\")?\"&\":\"?\")+e),delete t.query}\"application/json\"==this.getHeader(t.headers,\"Content-Type\")&&t.body&&\"string\"!=typeof t.body&&(t.body=JSON.stringify(t.body));return(t.fetch||fetch)(s,t).then((async e=>{let s={};try{s=await e.json()}catch(e){}if(this.afterSend&&(s=await this.afterSend(e,s,t)),e.status>=400)throw new ClientResponseError({url:e.url,status:e.status,data:s});return s})).catch((e=>{throw new ClientResponseError(e)}))}initSendOptions(e,t){if((t=Object.assign({method:\"GET\"},t)).body=function convertToFormDataIfNeeded(e){if(\"undefined\"==typeof FormData||void 0===e||\"object\"!=typeof e||null===e||isFormData(e)||!hasFileField(e))return e;const t=new FormData;for(const s in e){const i=e[s];if(\"object\"!=typeof i||hasFileField({data:i})){const e=Array.isArray(i)?i:[i];for(let i of e)t.append(s,i)}else{let e={};e[s]=i,t.append(\"@jsonPayload\",JSON.stringify(e))}}return t}(t.body),normalizeUnknownQueryParams(t),t.query=Object.assign({},t.params,t.query),void 0===t.requestKey&&(!1===t.$autoCancel||!1===t.query.$autoCancel?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,null!==this.getHeader(t.headers,\"Content-Type\")||isFormData(t.body)||(t.headers=Object.assign({},t.headers,{\"Content-Type\":\"application/json\"})),null===this.getHeader(t.headers,\"Accept-Language\")&&(t.headers=Object.assign({},t.headers,{\"Accept-Language\":this.lang})),this.authStore.token&&null===this.getHeader(t.headers,\"Authorization\")&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&null!==t.requestKey){const s=t.requestKey||(t.method||\"GET\")+e;delete t.requestKey,this.cancelRequest(s);const i=new AbortController;this.cancelControllers[s]=i,t.signal=i.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}}class AsyncAuthStore extends BaseAuthStore{constructor(e){super(),this.queue=[],this.saveFunc=e.save,this.clearFunc=e.clear,this._enqueue((()=>this._loadInitial(e.initial)))}save(e,t){super.save(e,t);let s=\"\";try{s=JSON.stringify({token:e,record:t})}catch(e){console.warn(\"AsyncAuthStore: failed to stringify the new state\")}this._enqueue((()=>this.saveFunc(s)))}clear(){super.clear(),this.clearFunc?this._enqueue((()=>this.clearFunc())):this._enqueue((()=>this.saveFunc(\"\")))}async _loadInitial(e){try{if(e=await e){let t;\"string\"==typeof e?t=JSON.parse(e)||{}:\"object\"==typeof e&&(t=e),this.save(t.token||\"\",t.record||t.model||null)}}catch(e){}}_enqueue(e){this.queue.push(e),1==this.queue.length&&this._dequeue()}_dequeue(){this.queue.length&&this.queue[0]().finally((()=>{this.queue.shift(),this.queue.length&&this._dequeue()}))}}\n//# sourceMappingURL=pocketbase.es.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcG9ja2V0YmFzZS9kaXN0L3BvY2tldGJhc2UuZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSx3Q0FBd0MsZUFBZSx1RUFBdUUsNGFBQTRhLGtyQkFBa3JCLFdBQVcscUJBQXFCLFNBQVMsT0FBTyxVQUFVLGdEQUFnRCwwQkFBMEIsV0FBVywrQkFBK0Isd0JBQXdCLE1BQU0sd0JBQXdCLFFBQVEsS0FBSyxXQUFXLEVBQUUseUJBQXlCLGdCQUFnQixrQkFBa0IsS0FBSyxxQkFBcUIsYUFBYSxrQkFBa0IsU0FBUyxTQUFTLDRCQUE0QixrQkFBa0IsNEJBQTRCLHdDQUF3QyxJQUFJLFVBQVUsU0FBUyxRQUFRLE1BQU0sU0FBUyxnQ0FBZ0Msd0JBQXdCLE1BQU0sNEJBQTRCLDhEQUE4RCxhQUFhLGdFQUFnRSxjQUFjLG1CQUFtQixtQkFBbUIsMEVBQTBFLE1BQU0sd0JBQXdCLGFBQWEscUVBQXFFLE1BQU0sa0JBQWtCLFdBQVcsaUVBQWlFLE1BQU0sY0FBYyxjQUFjLHVCQUF1Qiw2RUFBNkUseUZBQXlGLE1BQU0sa0NBQWtDLHNCQUFzQiw0QkFBNEIscUJBQXFCLHdFQUF3RSxnQkFBZ0IsY0FBYyxNQUFNLG1CQUFtQixpQkFBaUIsTUFBTSxpQkFBaUIsZUFBZSxNQUFNLDJEQUEyRCxlQUFlLHdFQUF3RSxhQUFhLGlCQUFpQixNQUFNLGdCQUFnQixjQUFjLE1BQU0sbUJBQW1CLGlCQUFpQixNQUFNLGlCQUFpQixlQUFlLE1BQU0sMkRBQTJELFNBQVMsMEJBQTBCLGtEQUFrRCwwQkFBMEIsNkJBQTZCLDRIQUE0SCxNQUFNLDRCQUE0QixTQUFTLHlFQUF5RSx3REFBd0QsYUFBYSx5QkFBeUIsVUFBVSxTQUFTLCtCQUErQix5QkFBeUIsbUVBQW1FLGlDQUFpQyxrQ0FBa0Msc0dBQXNHLHlCQUF5QixnQkFBZ0Isc0pBQXNKLFNBQVMsTUFBTSxrQkFBa0Isb0JBQW9CLGNBQWMsaUVBQWlFLFlBQVksc0JB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LFlBQVksa0NBQWtDLGtGQUFrRixZQUFZLDRCQUE0QixzR0FBc0csWUFBWSxtQ0FBbUMscURBQXFELDBDQUEwQywwQ0FBMEMsNEJBQTRCLDhDQUE4QyxTQUFTLGVBQWUsT0FBTyxtQkFBbUIsaURBQWlELGFBQWEsMkNBQTJDLGVBQWUsb0hBQW9ILFVBQVUsZ0JBQWdCLFNBQVMsSUFBSSxrQkFBa0IsaUJBQWlCLEVBQUUsU0FBUyxrRUFBa0Usc0NBQXNDLFFBQVEsMEdBQTBHLHNCQUFzQixJQUFJLGNBQWMsTUFBTSxzQ0FBc0MsMkVBQTJFLFdBQVcsWUFBWSx5REFBeUQsV0FBVyxpREFBaUQsc0RBQXNELElBQTRUO0FBQy9odEMiLCJzb3VyY2VzIjpbIkU6XFxTRU1FU1RFUiA3XFxXYXJnZW1cXG5vZGVfbW9kdWxlc1xccG9ja2V0YmFzZVxcZGlzdFxccG9ja2V0YmFzZS5lcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2xpZW50UmVzcG9uc2VFcnJvciBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwiQ2xpZW50UmVzcG9uc2VFcnJvclwiKSx0aGlzLnVybD1cIlwiLHRoaXMuc3RhdHVzPTAsdGhpcy5yZXNwb25zZT17fSx0aGlzLmlzQWJvcnQ9ITEsdGhpcy5vcmlnaW5hbEVycm9yPW51bGwsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsQ2xpZW50UmVzcG9uc2VFcnJvci5wcm90b3R5cGUpLG51bGwhPT1lJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmKHRoaXMudXJsPVwic3RyaW5nXCI9PXR5cGVvZiBlLnVybD9lLnVybDpcIlwiLHRoaXMuc3RhdHVzPVwibnVtYmVyXCI9PXR5cGVvZiBlLnN0YXR1cz9lLnN0YXR1czowLHRoaXMuaXNBYm9ydD0hIWUuaXNBYm9ydCx0aGlzLm9yaWdpbmFsRXJyb3I9ZS5vcmlnaW5hbEVycm9yLG51bGwhPT1lLnJlc3BvbnNlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5yZXNwb25zZT90aGlzLnJlc3BvbnNlPWUucmVzcG9uc2U6bnVsbCE9PWUuZGF0YSYmXCJvYmplY3RcIj09dHlwZW9mIGUuZGF0YT90aGlzLnJlc3BvbnNlPWUuZGF0YTp0aGlzLnJlc3BvbnNlPXt9KSx0aGlzLm9yaWdpbmFsRXJyb3J8fGUgaW5zdGFuY2VvZiBDbGllbnRSZXNwb25zZUVycm9yfHwodGhpcy5vcmlnaW5hbEVycm9yPWUpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBET01FeGNlcHRpb24mJmUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24mJih0aGlzLmlzQWJvcnQ9ITApLHRoaXMubmFtZT1cIkNsaWVudFJlc3BvbnNlRXJyb3IgXCIrdGhpcy5zdGF0dXMsdGhpcy5tZXNzYWdlPXRoaXMucmVzcG9uc2U/Lm1lc3NhZ2UsdGhpcy5tZXNzYWdlfHwodGhpcy5pc0Fib3J0P3RoaXMubWVzc2FnZT1cIlRoZSByZXF1ZXN0IHdhcyBhdXRvY2FuY2VsbGVkLiBZb3UgY2FuIGZpbmQgbW9yZSBpbmZvIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9wb2NrZXRiYXNlL2pzLXNkayNhdXRvLWNhbmNlbGxhdGlvbi5cIjp0aGlzLm9yaWdpbmFsRXJyb3I/LmNhdXNlPy5tZXNzYWdlPy5pbmNsdWRlcyhcIkVDT05OUkVGVVNFRCA6OjFcIik/dGhpcy5tZXNzYWdlPVwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gdGhlIFBvY2tldEJhc2Ugc2VydmVyLiBUcnkgY2hhbmdpbmcgdGhlIFNESyBVUkwgZnJvbSBsb2NhbGhvc3QgdG8gMTI3LjAuMC4xIChodHRwczovL2dpdGh1Yi5jb20vcG9ja2V0YmFzZS9qcy1zZGsvaXNzdWVzLzIxKS5cIjp0aGlzLm1lc3NhZ2U9XCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC5cIil9Z2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5yZXNwb25zZX10b0pTT04oKXtyZXR1cm57Li4udGhpc319fWNvbnN0IGU9L15bXFx1MDAwOVxcdTAwMjAtXFx1MDA3ZVxcdTAwODAtXFx1MDBmZl0rJC87ZnVuY3Rpb24gY29va2llUGFyc2UoZSx0KXtjb25zdCBzPXt9O2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBzO2NvbnN0IGk9T2JqZWN0LmFzc2lnbih7fSx0fHx7fSkuZGVjb2RlfHxkZWZhdWx0RGVjb2RlO2xldCBuPTA7Zm9yKDtuPGUubGVuZ3RoOyl7Y29uc3QgdD1lLmluZGV4T2YoXCI9XCIsbik7aWYoLTE9PT10KWJyZWFrO2xldCByPWUuaW5kZXhPZihcIjtcIixuKTtpZigtMT09PXIpcj1lLmxlbmd0aDtlbHNlIGlmKHI8dCl7bj1lLmxhc3RJbmRleE9mKFwiO1wiLHQtMSkrMTtjb250aW51ZX1jb25zdCBvPWUuc2xpY2Uobix0KS50cmltKCk7aWYodm9pZCAwPT09c1tvXSl7bGV0IG49ZS5zbGljZSh0KzEscikudHJpbSgpOzM0PT09bi5jaGFyQ29kZUF0KDApJiYobj1uLnNsaWNlKDEsLTEpKTt0cnl7c1tvXT1pKG4pfWNhdGNoKGUpe3Nbb109bn19bj1yKzF9cmV0dXJuIHN9ZnVuY3Rpb24gY29va2llU2VyaWFsaXplKHQscyxpKXtjb25zdCBuPU9iamVjdC5hc3NpZ24oe30saXx8e30pLHI9bi5lbmNvZGV8fGRlZmF1bHRFbmNvZGU7aWYoIWUudGVzdCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXJndW1lbnQgbmFtZSBpcyBpbnZhbGlkXCIpO2NvbnN0IG89cihzKTtpZihvJiYhZS50ZXN0KG8pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJhcmd1bWVudCB2YWwgaXMgaW52YWxpZFwiKTtsZXQgYT10K1wiPVwiK287aWYobnVsbCE9bi5tYXhBZ2Upe2NvbnN0IGU9bi5tYXhBZ2UtMDtpZihpc05hTihlKXx8IWlzRmluaXRlKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJvcHRpb24gbWF4QWdlIGlzIGludmFsaWRcIik7YSs9XCI7IE1heC1BZ2U9XCIrTWF0aC5mbG9vcihlKX1pZihuLmRvbWFpbil7aWYoIWUudGVzdChuLmRvbWFpbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm9wdGlvbiBkb21haW4gaXMgaW52YWxpZFwiKTthKz1cIjsgRG9tYWluPVwiK24uZG9tYWlufWlmKG4ucGF0aCl7aWYoIWUudGVzdChuLnBhdGgpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJvcHRpb24gcGF0aCBpcyBpbnZhbGlkXCIpO2ErPVwiOyBQYXRoPVwiK24ucGF0aH1pZihuLmV4cGlyZXMpe2lmKCFmdW5jdGlvbiBpc0RhdGUoZSl7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl8fGUgaW5zdGFuY2VvZiBEYXRlfShuLmV4cGlyZXMpfHxpc05hTihuLmV4cGlyZXMudmFsdWVPZigpKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwib3B0aW9uIGV4cGlyZXMgaXMgaW52YWxpZFwiKTthKz1cIjsgRXhwaXJlcz1cIituLmV4cGlyZXMudG9VVENTdHJpbmcoKX1pZihuLmh0dHBPbmx5JiYoYSs9XCI7IEh0dHBPbmx5XCIpLG4uc2VjdXJlJiYoYSs9XCI7IFNlY3VyZVwiKSxuLnByaW9yaXR5KXtzd2l0Y2goXCJzdHJpbmdcIj09dHlwZW9mIG4ucHJpb3JpdHk/bi5wcmlvcml0eS50b0xvd2VyQ2FzZSgpOm4ucHJpb3JpdHkpe2Nhc2VcImxvd1wiOmErPVwiOyBQcmlvcml0eT1Mb3dcIjticmVhaztjYXNlXCJtZWRpdW1cIjphKz1cIjsgUHJpb3JpdHk9TWVkaXVtXCI7YnJlYWs7Y2FzZVwiaGlnaFwiOmErPVwiOyBQcmlvcml0eT1IaWdoXCI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKFwib3B0aW9uIHByaW9yaXR5IGlzIGludmFsaWRcIil9fWlmKG4uc2FtZVNpdGUpe3N3aXRjaChcInN0cmluZ1wiPT10eXBlb2Ygbi5zYW1lU2l0ZT9uLnNhbWVTaXRlLnRvTG93ZXJDYXNlKCk6bi5zYW1lU2l0ZSl7Y2FzZSEwOmErPVwiOyBTYW1lU2l0ZT1TdHJpY3RcIjticmVhaztjYXNlXCJsYXhcIjphKz1cIjsgU2FtZVNpdGU9TGF4XCI7YnJlYWs7Y2FzZVwic3RyaWN0XCI6YSs9XCI7IFNhbWVTaXRlPVN0cmljdFwiO2JyZWFrO2Nhc2VcIm5vbmVcIjphKz1cIjsgU2FtZVNpdGU9Tm9uZVwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcihcIm9wdGlvbiBzYW1lU2l0ZSBpcyBpbnZhbGlkXCIpfX1yZXR1cm4gYX1mdW5jdGlvbiBkZWZhdWx0RGVjb2RlKGUpe3JldHVybi0xIT09ZS5pbmRleE9mKFwiJVwiKT9kZWNvZGVVUklDb21wb25lbnQoZSk6ZX1mdW5jdGlvbiBkZWZhdWx0RW5jb2RlKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZSl9Y29uc3QgdD1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZcIlJlYWN0TmF0aXZlXCI9PT1uYXZpZ2F0b3IucHJvZHVjdHx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmZ2xvYmFsLkhlcm1lc0ludGVybmFsO2xldCBzO2Z1bmN0aW9uIGdldFRva2VuUGF5bG9hZChlKXtpZihlKXRyeXtjb25zdCB0PWRlY29kZVVSSUNvbXBvbmVudChzKGUuc3BsaXQoXCIuXCIpWzFdKS5zcGxpdChcIlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVyblwiJVwiKyhcIjAwXCIrZS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpfSkpLmpvaW4oXCJcIikpO3JldHVybiBKU09OLnBhcnNlKHQpfHx7fX1jYXRjaChlKXt9cmV0dXJue319ZnVuY3Rpb24gaXNUb2tlbkV4cGlyZWQoZSx0PTApe2xldCBzPWdldFRva2VuUGF5bG9hZChlKTtyZXR1cm4hKE9iamVjdC5rZXlzKHMpLmxlbmd0aD4wJiYoIXMuZXhwfHxzLmV4cC10PkRhdGUubm93KCkvMWUzKSl9cz1cImZ1bmN0aW9uXCIhPXR5cGVvZiBhdG9ifHx0P2U9PntsZXQgdD1TdHJpbmcoZSkucmVwbGFjZSgvPSskLyxcIlwiKTtpZih0Lmxlbmd0aCU0PT0xKXRocm93IG5ldyBFcnJvcihcIidhdG9iJyBmYWlsZWQ6IFRoZSBzdHJpbmcgdG8gYmUgZGVjb2RlZCBpcyBub3QgY29ycmVjdGx5IGVuY29kZWQuXCIpO2Zvcih2YXIgcyxpLG49MCxyPTAsbz1cIlwiO2k9dC5jaGFyQXQocisrKTt+aSYmKHM9biU0PzY0KnMraTppLG4rKyU0KT9vKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZzPj4oLTIqbiY2KSk6MClpPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIi5pbmRleE9mKGkpO3JldHVybiBvfTphdG9iO2NvbnN0IGk9XCJwYl9hdXRoXCI7Y2xhc3MgQmFzZUF1dGhTdG9yZXtjb25zdHJ1Y3Rvcigpe3RoaXMuYmFzZVRva2VuPVwiXCIsdGhpcy5iYXNlTW9kZWw9bnVsbCx0aGlzLl9vbkNoYW5nZUNhbGxiYWNrcz1bXX1nZXQgdG9rZW4oKXtyZXR1cm4gdGhpcy5iYXNlVG9rZW59Z2V0IHJlY29yZCgpe3JldHVybiB0aGlzLmJhc2VNb2RlbH1nZXQgbW9kZWwoKXtyZXR1cm4gdGhpcy5iYXNlTW9kZWx9Z2V0IGlzVmFsaWQoKXtyZXR1cm4haXNUb2tlbkV4cGlyZWQodGhpcy50b2tlbil9Z2V0IGlzU3VwZXJ1c2VyKCl7bGV0IGU9Z2V0VG9rZW5QYXlsb2FkKHRoaXMudG9rZW4pO3JldHVyblwiYXV0aFwiPT1lLnR5cGUmJihcIl9zdXBlcnVzZXJzXCI9PXRoaXMucmVjb3JkPy5jb2xsZWN0aW9uTmFtZXx8IXRoaXMucmVjb3JkPy5jb2xsZWN0aW9uTmFtZSYmXCJwYmNfMzE0MjYzNTgyM1wiPT1lLmNvbGxlY3Rpb25JZCl9Z2V0IGlzQWRtaW4oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiUGxlYXNlIHJlcGxhY2UgcGIuYXV0aFN0b3JlLmlzQWRtaW4gd2l0aCBwYi5hdXRoU3RvcmUuaXNTdXBlcnVzZXIgT1Igc2ltcGx5IGNoZWNrIHRoZSB2YWx1ZSBvZiBwYi5hdXRoU3RvcmUucmVjb3JkPy5jb2xsZWN0aW9uTmFtZVwiKSx0aGlzLmlzU3VwZXJ1c2VyfWdldCBpc0F1dGhSZWNvcmQoKXtyZXR1cm4gY29uc29sZS53YXJuKFwiUGxlYXNlIHJlcGxhY2UgcGIuYXV0aFN0b3JlLmlzQXV0aFJlY29yZCB3aXRoICFwYi5hdXRoU3RvcmUuaXNTdXBlcnVzZXIgT1Igc2ltcGx5IGNoZWNrIHRoZSB2YWx1ZSBvZiBwYi5hdXRoU3RvcmUucmVjb3JkPy5jb2xsZWN0aW9uTmFtZVwiKSxcImF1dGhcIj09Z2V0VG9rZW5QYXlsb2FkKHRoaXMudG9rZW4pLnR5cGUmJiF0aGlzLmlzU3VwZXJ1c2VyfXNhdmUoZSx0KXt0aGlzLmJhc2VUb2tlbj1lfHxcIlwiLHRoaXMuYmFzZU1vZGVsPXR8fG51bGwsdGhpcy50cmlnZ2VyQ2hhbmdlKCl9Y2xlYXIoKXt0aGlzLmJhc2VUb2tlbj1cIlwiLHRoaXMuYmFzZU1vZGVsPW51bGwsdGhpcy50cmlnZ2VyQ2hhbmdlKCl9bG9hZEZyb21Db29raWUoZSx0PWkpe2NvbnN0IHM9Y29va2llUGFyc2UoZXx8XCJcIilbdF18fFwiXCI7bGV0IG49e307dHJ5e249SlNPTi5wYXJzZShzKSwobnVsbD09PXR5cGVvZiBufHxcIm9iamVjdFwiIT10eXBlb2Ygbnx8QXJyYXkuaXNBcnJheShuKSkmJihuPXt9KX1jYXRjaChlKXt9dGhpcy5zYXZlKG4udG9rZW58fFwiXCIsbi5yZWNvcmR8fG4ubW9kZWx8fG51bGwpfWV4cG9ydFRvQ29va2llKGUsdD1pKXtjb25zdCBzPXtzZWN1cmU6ITAsc2FtZVNpdGU6ITAsaHR0cE9ubHk6ITAscGF0aDpcIi9cIn0sbj1nZXRUb2tlblBheWxvYWQodGhpcy50b2tlbik7cy5leHBpcmVzPW4/LmV4cD9uZXcgRGF0ZSgxZTMqbi5leHApOm5ldyBEYXRlKFwiMTk3MC0wMS0wMVwiKSxlPU9iamVjdC5hc3NpZ24oe30scyxlKTtjb25zdCByPXt0b2tlbjp0aGlzLnRva2VuLHJlY29yZDp0aGlzLnJlY29yZD9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucmVjb3JkKSk6bnVsbH07bGV0IG89Y29va2llU2VyaWFsaXplKHQsSlNPTi5zdHJpbmdpZnkociksZSk7Y29uc3QgYT1cInVuZGVmaW5lZFwiIT10eXBlb2YgQmxvYj9uZXcgQmxvYihbb10pLnNpemU6by5sZW5ndGg7aWYoci5yZWNvcmQmJmE+NDA5Nil7ci5yZWNvcmQ9e2lkOnIucmVjb3JkPy5pZCxlbWFpbDpyLnJlY29yZD8uZW1haWx9O2NvbnN0IHM9W1wiY29sbGVjdGlvbklkXCIsXCJjb2xsZWN0aW9uTmFtZVwiLFwidmVyaWZpZWRcIl07Zm9yKGNvbnN0IGUgaW4gdGhpcy5yZWNvcmQpcy5pbmNsdWRlcyhlKSYmKHIucmVjb3JkW2VdPXRoaXMucmVjb3JkW2VdKTtvPWNvb2tpZVNlcmlhbGl6ZSh0LEpTT04uc3RyaW5naWZ5KHIpLGUpfXJldHVybiBvfW9uQ2hhbmdlKGUsdD0hMSl7cmV0dXJuIHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2tzLnB1c2goZSksdCYmZSh0aGlzLnRva2VuLHRoaXMucmVjb3JkKSwoKT0+e2ZvcihsZXQgdD10aGlzLl9vbkNoYW5nZUNhbGxiYWNrcy5sZW5ndGgtMTt0Pj0wO3QtLSlpZih0aGlzLl9vbkNoYW5nZUNhbGxiYWNrc1t0XT09ZSlyZXR1cm4gZGVsZXRlIHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2tzW3RdLHZvaWQgdGhpcy5fb25DaGFuZ2VDYWxsYmFja3Muc3BsaWNlKHQsMSl9fXRyaWdnZXJDaGFuZ2UoKXtmb3IoY29uc3QgZSBvZiB0aGlzLl9vbkNoYW5nZUNhbGxiYWNrcyllJiZlKHRoaXMudG9rZW4sdGhpcy5yZWNvcmQpfX1jbGFzcyBMb2NhbEF1dGhTdG9yZSBleHRlbmRzIEJhc2VBdXRoU3RvcmV7Y29uc3RydWN0b3IoZT1cInBvY2tldGJhc2VfYXV0aFwiKXtzdXBlcigpLHRoaXMuc3RvcmFnZUZhbGxiYWNrPXt9LHRoaXMuc3RvcmFnZUtleT1lLHRoaXMuX2JpbmRTdG9yYWdlRXZlbnQoKX1nZXQgdG9rZW4oKXtyZXR1cm4odGhpcy5fc3RvcmFnZUdldCh0aGlzLnN0b3JhZ2VLZXkpfHx7fSkudG9rZW58fFwiXCJ9Z2V0IHJlY29yZCgpe2NvbnN0IGU9dGhpcy5fc3RvcmFnZUdldCh0aGlzLnN0b3JhZ2VLZXkpfHx7fTtyZXR1cm4gZS5yZWNvcmR8fGUubW9kZWx8fG51bGx9Z2V0IG1vZGVsKCl7cmV0dXJuIHRoaXMucmVjb3JkfXNhdmUoZSx0KXt0aGlzLl9zdG9yYWdlU2V0KHRoaXMuc3RvcmFnZUtleSx7dG9rZW46ZSxyZWNvcmQ6dH0pLHN1cGVyLnNhdmUoZSx0KX1jbGVhcigpe3RoaXMuX3N0b3JhZ2VSZW1vdmUodGhpcy5zdG9yYWdlS2V5KSxzdXBlci5jbGVhcigpfV9zdG9yYWdlR2V0KGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdz8ubG9jYWxTdG9yYWdlKXtjb25zdCB0PXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKXx8XCJcIjt0cnl7cmV0dXJuIEpTT04ucGFyc2UodCl9Y2F0Y2goZSl7cmV0dXJuIHR9fXJldHVybiB0aGlzLnN0b3JhZ2VGYWxsYmFja1tlXX1fc3RvcmFnZVNldChlLHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdz8ubG9jYWxTdG9yYWdlKXtsZXQgcz10O1wic3RyaW5nXCIhPXR5cGVvZiB0JiYocz1KU09OLnN0cmluZ2lmeSh0KSksd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGUscyl9ZWxzZSB0aGlzLnN0b3JhZ2VGYWxsYmFja1tlXT10fV9zdG9yYWdlUmVtb3ZlKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdz8ubG9jYWxTdG9yYWdlJiZ3aW5kb3cubG9jYWxTdG9yYWdlPy5yZW1vdmVJdGVtKGUpLGRlbGV0ZSB0aGlzLnN0b3JhZ2VGYWxsYmFja1tlXX1fYmluZFN0b3JhZ2VFdmVudCgpe1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdz8ubG9jYWxTdG9yYWdlJiZ3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsKGU9PntpZihlLmtleSE9dGhpcy5zdG9yYWdlS2V5KXJldHVybjtjb25zdCB0PXRoaXMuX3N0b3JhZ2VHZXQodGhpcy5zdG9yYWdlS2V5KXx8e307c3VwZXIuc2F2ZSh0LnRva2VufHxcIlwiLHQucmVjb3JkfHx0Lm1vZGVsfHxudWxsKX0pKX19Y2xhc3MgQmFzZVNlcnZpY2V7Y29uc3RydWN0b3IoZSl7dGhpcy5jbGllbnQ9ZX19Y2xhc3MgU2V0dGluZ3NTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2V7YXN5bmMgZ2V0QWxsKGUpe3JldHVybiBlPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIkdFVFwifSxlKSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9zZXR0aW5nc1wiLGUpfWFzeW5jIHVwZGF0ZShlLHQpe3JldHVybiB0PU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBBVENIXCIsYm9keTplfSx0KSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9zZXR0aW5nc1wiLHQpfWFzeW5jIHRlc3RTMyhlPVwic3RvcmFnZVwiLHQpe3JldHVybiB0PU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIixib2R5OntmaWxlc3lzdGVtOmV9fSx0KSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9zZXR0aW5ncy90ZXN0L3MzXCIsdCkudGhlbigoKCk9PiEwKSl9YXN5bmMgdGVzdEVtYWlsKGUsdCxzLGkpe3JldHVybiBpPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIixib2R5OntlbWFpbDp0LHRlbXBsYXRlOnMsY29sbGVjdGlvbjplfX0saSksdGhpcy5jbGllbnQuc2VuZChcIi9hcGkvc2V0dGluZ3MvdGVzdC9lbWFpbFwiLGkpLnRoZW4oKCgpPT4hMCkpfWFzeW5jIGdlbmVyYXRlQXBwbGVDbGllbnRTZWNyZXQoZSx0LHMsaSxuLHIpe3JldHVybiByPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIixib2R5OntjbGllbnRJZDplLHRlYW1JZDp0LGtleUlkOnMscHJpdmF0ZUtleTppLGR1cmF0aW9uOm59fSxyKSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9zZXR0aW5ncy9hcHBsZS9nZW5lcmF0ZS1jbGllbnQtc2VjcmV0XCIscil9fWNvbnN0IG49W1wicmVxdWVzdEtleVwiLFwiJGNhbmNlbEtleVwiLFwiJGF1dG9DYW5jZWxcIixcImZldGNoXCIsXCJoZWFkZXJzXCIsXCJib2R5XCIsXCJxdWVyeVwiLFwicGFyYW1zXCIsXCJjYWNoZVwiLFwiY3JlZGVudGlhbHNcIixcImhlYWRlcnNcIixcImludGVncml0eVwiLFwia2VlcGFsaXZlXCIsXCJtZXRob2RcIixcIm1vZGVcIixcInJlZGlyZWN0XCIsXCJyZWZlcnJlclwiLFwicmVmZXJyZXJQb2xpY3lcIixcInNpZ25hbFwiLFwid2luZG93XCJdO2Z1bmN0aW9uIG5vcm1hbGl6ZVVua25vd25RdWVyeVBhcmFtcyhlKXtpZihlKXtlLnF1ZXJ5PWUucXVlcnl8fHt9O2ZvcihsZXQgdCBpbiBlKW4uaW5jbHVkZXModCl8fChlLnF1ZXJ5W3RdPWVbdF0sZGVsZXRlIGVbdF0pfX1mdW5jdGlvbiBzZXJpYWxpemVRdWVyeVBhcmFtcyhlKXtjb25zdCB0PVtdO2Zvcihjb25zdCBzIGluIGUpe2lmKG51bGw9PT1lW3NdKWNvbnRpbnVlO2NvbnN0IGk9ZVtzXSxuPWVuY29kZVVSSUNvbXBvbmVudChzKTtpZihBcnJheS5pc0FycmF5KGkpKWZvcihjb25zdCBlIG9mIGkpdC5wdXNoKG4rXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGUpKTtlbHNlIGkgaW5zdGFuY2VvZiBEYXRlP3QucHVzaChuK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChpLnRvSVNPU3RyaW5nKCkpKTpudWxsIT09dHlwZW9mIGkmJlwib2JqZWN0XCI9PXR5cGVvZiBpP3QucHVzaChuK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShpKSkpOnQucHVzaChuK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChpKSl9cmV0dXJuIHQuam9pbihcIiZcIil9Y2xhc3MgUmVhbHRpbWVTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2V7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY2xpZW50SWQ9XCJcIix0aGlzLmV2ZW50U291cmNlPW51bGwsdGhpcy5zdWJzY3JpcHRpb25zPXt9LHRoaXMubGFzdFNlbnRTdWJzY3JpcHRpb25zPVtdLHRoaXMubWF4Q29ubmVjdFRpbWVvdXQ9MTVlMyx0aGlzLnJlY29ubmVjdEF0dGVtcHRzPTAsdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cz0xLzAsdGhpcy5wcmVkZWZpbmVkUmVjb25uZWN0SW50ZXJ2YWxzPVsyMDAsMzAwLDUwMCwxZTMsMTIwMCwxNTAwLDJlM10sdGhpcy5wZW5kaW5nQ29ubmVjdHM9W119Z2V0IGlzQ29ubmVjdGVkKCl7cmV0dXJuISF0aGlzLmV2ZW50U291cmNlJiYhIXRoaXMuY2xpZW50SWQmJiF0aGlzLnBlbmRpbmdDb25uZWN0cy5sZW5ndGh9YXN5bmMgc3Vic2NyaWJlKGUsdCxzKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJ0b3BpYyBtdXN0IGJlIHNldC5cIik7bGV0IGk9ZTtpZihzKXtub3JtYWxpemVVbmtub3duUXVlcnlQYXJhbXMocz1PYmplY3QuYXNzaWduKHt9LHMpKTtjb25zdCBlPVwib3B0aW9ucz1cIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoe3F1ZXJ5OnMucXVlcnksaGVhZGVyczpzLmhlYWRlcnN9KSk7aSs9KGkuaW5jbHVkZXMoXCI/XCIpP1wiJlwiOlwiP1wiKStlfWNvbnN0IGxpc3RlbmVyPWZ1bmN0aW9uKGUpe2NvbnN0IHM9ZTtsZXQgaTt0cnl7aT1KU09OLnBhcnNlKHM/LmRhdGEpfWNhdGNoe310KGl8fHt9KX07cmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9uc1tpXXx8KHRoaXMuc3Vic2NyaXB0aW9uc1tpXT1bXSksdGhpcy5zdWJzY3JpcHRpb25zW2ldLnB1c2gobGlzdGVuZXIpLHRoaXMuaXNDb25uZWN0ZWQ/MT09PXRoaXMuc3Vic2NyaXB0aW9uc1tpXS5sZW5ndGg/YXdhaXQgdGhpcy5zdWJtaXRTdWJzY3JpcHRpb25zKCk6dGhpcy5ldmVudFNvdXJjZT8uYWRkRXZlbnRMaXN0ZW5lcihpLGxpc3RlbmVyKTphd2FpdCB0aGlzLmNvbm5lY3QoKSxhc3luYygpPT50aGlzLnVuc3Vic2NyaWJlQnlUb3BpY0FuZExpc3RlbmVyKGUsbGlzdGVuZXIpfWFzeW5jIHVuc3Vic2NyaWJlKGUpe2xldCB0PSExO2lmKGUpe2NvbnN0IHM9dGhpcy5nZXRTdWJzY3JpcHRpb25zQnlUb3BpYyhlKTtmb3IobGV0IGUgaW4gcylpZih0aGlzLmhhc1N1YnNjcmlwdGlvbkxpc3RlbmVycyhlKSl7Zm9yKGxldCB0IG9mIHRoaXMuc3Vic2NyaXB0aW9uc1tlXSl0aGlzLmV2ZW50U291cmNlPy5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCk7ZGVsZXRlIHRoaXMuc3Vic2NyaXB0aW9uc1tlXSx0fHwodD0hMCl9fWVsc2UgdGhpcy5zdWJzY3JpcHRpb25zPXt9O3RoaXMuaGFzU3Vic2NyaXB0aW9uTGlzdGVuZXJzKCk/dCYmYXdhaXQgdGhpcy5zdWJtaXRTdWJzY3JpcHRpb25zKCk6dGhpcy5kaXNjb25uZWN0KCl9YXN5bmMgdW5zdWJzY3JpYmVCeVByZWZpeChlKXtsZXQgdD0hMTtmb3IobGV0IHMgaW4gdGhpcy5zdWJzY3JpcHRpb25zKWlmKChzK1wiP1wiKS5zdGFydHNXaXRoKGUpKXt0PSEwO2ZvcihsZXQgZSBvZiB0aGlzLnN1YnNjcmlwdGlvbnNbc10pdGhpcy5ldmVudFNvdXJjZT8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGUpO2RlbGV0ZSB0aGlzLnN1YnNjcmlwdGlvbnNbc119dCYmKHRoaXMuaGFzU3Vic2NyaXB0aW9uTGlzdGVuZXJzKCk/YXdhaXQgdGhpcy5zdWJtaXRTdWJzY3JpcHRpb25zKCk6dGhpcy5kaXNjb25uZWN0KCkpfWFzeW5jIHVuc3Vic2NyaWJlQnlUb3BpY0FuZExpc3RlbmVyKGUsdCl7bGV0IHM9ITE7Y29uc3QgaT10aGlzLmdldFN1YnNjcmlwdGlvbnNCeVRvcGljKGUpO2ZvcihsZXQgZSBpbiBpKXtpZighQXJyYXkuaXNBcnJheSh0aGlzLnN1YnNjcmlwdGlvbnNbZV0pfHwhdGhpcy5zdWJzY3JpcHRpb25zW2VdLmxlbmd0aCljb250aW51ZTtsZXQgaT0hMTtmb3IobGV0IHM9dGhpcy5zdWJzY3JpcHRpb25zW2VdLmxlbmd0aC0xO3M+PTA7cy0tKXRoaXMuc3Vic2NyaXB0aW9uc1tlXVtzXT09PXQmJihpPSEwLGRlbGV0ZSB0aGlzLnN1YnNjcmlwdGlvbnNbZV1bc10sdGhpcy5zdWJzY3JpcHRpb25zW2VdLnNwbGljZShzLDEpLHRoaXMuZXZlbnRTb3VyY2U/LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KSk7aSYmKHRoaXMuc3Vic2NyaXB0aW9uc1tlXS5sZW5ndGh8fGRlbGV0ZSB0aGlzLnN1YnNjcmlwdGlvbnNbZV0sc3x8dGhpcy5oYXNTdWJzY3JpcHRpb25MaXN0ZW5lcnMoZSl8fChzPSEwKSl9dGhpcy5oYXNTdWJzY3JpcHRpb25MaXN0ZW5lcnMoKT9zJiZhd2FpdCB0aGlzLnN1Ym1pdFN1YnNjcmlwdGlvbnMoKTp0aGlzLmRpc2Nvbm5lY3QoKX1oYXNTdWJzY3JpcHRpb25MaXN0ZW5lcnMoZSl7aWYodGhpcy5zdWJzY3JpcHRpb25zPXRoaXMuc3Vic2NyaXB0aW9uc3x8e30sZSlyZXR1cm4hIXRoaXMuc3Vic2NyaXB0aW9uc1tlXT8ubGVuZ3RoO2ZvcihsZXQgZSBpbiB0aGlzLnN1YnNjcmlwdGlvbnMpaWYodGhpcy5zdWJzY3JpcHRpb25zW2VdPy5sZW5ndGgpcmV0dXJuITA7cmV0dXJuITF9YXN5bmMgc3VibWl0U3Vic2NyaXB0aW9ucygpe2lmKHRoaXMuY2xpZW50SWQpcmV0dXJuIHRoaXMuYWRkQWxsU3Vic2NyaXB0aW9uTGlzdGVuZXJzKCksdGhpcy5sYXN0U2VudFN1YnNjcmlwdGlvbnM9dGhpcy5nZXROb25FbXB0eVN1YnNjcmlwdGlvbktleXMoKSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9yZWFsdGltZVwiLHttZXRob2Q6XCJQT1NUXCIsYm9keTp7Y2xpZW50SWQ6dGhpcy5jbGllbnRJZCxzdWJzY3JpcHRpb25zOnRoaXMubGFzdFNlbnRTdWJzY3JpcHRpb25zfSxyZXF1ZXN0S2V5OnRoaXMuZ2V0U3Vic2NyaXB0aW9uc0NhbmNlbEtleSgpfSkuY2F0Y2goKGU9PntpZighZT8uaXNBYm9ydCl0aHJvdyBlfSkpfWdldFN1YnNjcmlwdGlvbnNDYW5jZWxLZXkoKXtyZXR1cm5cInJlYWx0aW1lX1wiK3RoaXMuY2xpZW50SWR9Z2V0U3Vic2NyaXB0aW9uc0J5VG9waWMoZSl7Y29uc3QgdD17fTtlPWUuaW5jbHVkZXMoXCI/XCIpP2U6ZStcIj9cIjtmb3IobGV0IHMgaW4gdGhpcy5zdWJzY3JpcHRpb25zKShzK1wiP1wiKS5zdGFydHNXaXRoKGUpJiYodFtzXT10aGlzLnN1YnNjcmlwdGlvbnNbc10pO3JldHVybiB0fWdldE5vbkVtcHR5U3Vic2NyaXB0aW9uS2V5cygpe2NvbnN0IGU9W107Zm9yKGxldCB0IGluIHRoaXMuc3Vic2NyaXB0aW9ucyl0aGlzLnN1YnNjcmlwdGlvbnNbdF0ubGVuZ3RoJiZlLnB1c2godCk7cmV0dXJuIGV9YWRkQWxsU3Vic2NyaXB0aW9uTGlzdGVuZXJzKCl7aWYodGhpcy5ldmVudFNvdXJjZSl7dGhpcy5yZW1vdmVBbGxTdWJzY3JpcHRpb25MaXN0ZW5lcnMoKTtmb3IobGV0IGUgaW4gdGhpcy5zdWJzY3JpcHRpb25zKWZvcihsZXQgdCBvZiB0aGlzLnN1YnNjcmlwdGlvbnNbZV0pdGhpcy5ldmVudFNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGUsdCl9fXJlbW92ZUFsbFN1YnNjcmlwdGlvbkxpc3RlbmVycygpe2lmKHRoaXMuZXZlbnRTb3VyY2UpZm9yKGxldCBlIGluIHRoaXMuc3Vic2NyaXB0aW9ucylmb3IobGV0IHQgb2YgdGhpcy5zdWJzY3JpcHRpb25zW2VdKXRoaXMuZXZlbnRTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfWFzeW5jIGNvbm5lY3QoKXtpZighKHRoaXMucmVjb25uZWN0QXR0ZW1wdHM+MCkpcmV0dXJuIG5ldyBQcm9taXNlKCgoZSx0KT0+e3RoaXMucGVuZGluZ0Nvbm5lY3RzLnB1c2goe3Jlc29sdmU6ZSxyZWplY3Q6dH0pLHRoaXMucGVuZGluZ0Nvbm5lY3RzLmxlbmd0aD4xfHx0aGlzLmluaXRDb25uZWN0KCl9KSl9aW5pdENvbm5lY3QoKXt0aGlzLmRpc2Nvbm5lY3QoITApLGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3RUaW1lb3V0SWQpLHRoaXMuY29ubmVjdFRpbWVvdXRJZD1zZXRUaW1lb3V0KCgoKT0+e3RoaXMuY29ubmVjdEVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJFdmVudFNvdXJjZSBjb25uZWN0IHRvb2sgdG9vIGxvbmcuXCIpKX0pLHRoaXMubWF4Q29ubmVjdFRpbWVvdXQpLHRoaXMuZXZlbnRTb3VyY2U9bmV3IEV2ZW50U291cmNlKHRoaXMuY2xpZW50LmJ1aWxkVVJMKFwiL2FwaS9yZWFsdGltZVwiKSksdGhpcy5ldmVudFNvdXJjZS5vbmVycm9yPWU9Pnt0aGlzLmNvbm5lY3RFcnJvckhhbmRsZXIobmV3IEVycm9yKFwiRmFpbGVkIHRvIGVzdGFibGlzaCByZWFsdGltZSBjb25uZWN0aW9uLlwiKSl9LHRoaXMuZXZlbnRTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcIlBCX0NPTk5FQ1RcIiwoZT0+e2NvbnN0IHQ9ZTt0aGlzLmNsaWVudElkPXQ/Lmxhc3RFdmVudElkLHRoaXMuc3VibWl0U3Vic2NyaXB0aW9ucygpLnRoZW4oKGFzeW5jKCk9PntsZXQgZT0zO2Zvcig7dGhpcy5oYXNVbnNlbnRTdWJzY3JpcHRpb25zKCkmJmU+MDspZS0tLGF3YWl0IHRoaXMuc3VibWl0U3Vic2NyaXB0aW9ucygpfSkpLnRoZW4oKCgpPT57Zm9yKGxldCBlIG9mIHRoaXMucGVuZGluZ0Nvbm5lY3RzKWUucmVzb2x2ZSgpO3RoaXMucGVuZGluZ0Nvbm5lY3RzPVtdLHRoaXMucmVjb25uZWN0QXR0ZW1wdHM9MCxjbGVhclRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lb3V0SWQpLGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3RUaW1lb3V0SWQpO2NvbnN0IHQ9dGhpcy5nZXRTdWJzY3JpcHRpb25zQnlUb3BpYyhcIlBCX0NPTk5FQ1RcIik7Zm9yKGxldCBzIGluIHQpZm9yKGxldCBpIG9mIHRbc10paShlKX0pKS5jYXRjaCgoZT0+e3RoaXMuY2xpZW50SWQ9XCJcIix0aGlzLmNvbm5lY3RFcnJvckhhbmRsZXIoZSl9KSl9KSl9aGFzVW5zZW50U3Vic2NyaXB0aW9ucygpe2NvbnN0IGU9dGhpcy5nZXROb25FbXB0eVN1YnNjcmlwdGlvbktleXMoKTtpZihlLmxlbmd0aCE9dGhpcy5sYXN0U2VudFN1YnNjcmlwdGlvbnMubGVuZ3RoKXJldHVybiEwO2Zvcihjb25zdCB0IG9mIGUpaWYoIXRoaXMubGFzdFNlbnRTdWJzY3JpcHRpb25zLmluY2x1ZGVzKHQpKXJldHVybiEwO3JldHVybiExfWNvbm5lY3RFcnJvckhhbmRsZXIoZSl7aWYoY2xlYXJUaW1lb3V0KHRoaXMuY29ubmVjdFRpbWVvdXRJZCksY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZW91dElkKSwhdGhpcy5jbGllbnRJZCYmIXRoaXMucmVjb25uZWN0QXR0ZW1wdHN8fHRoaXMucmVjb25uZWN0QXR0ZW1wdHM+dGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cyl7Zm9yKGxldCB0IG9mIHRoaXMucGVuZGluZ0Nvbm5lY3RzKXQucmVqZWN0KG5ldyBDbGllbnRSZXNwb25zZUVycm9yKGUpKTtyZXR1cm4gdGhpcy5wZW5kaW5nQ29ubmVjdHM9W10sdm9pZCB0aGlzLmRpc2Nvbm5lY3QoKX10aGlzLmRpc2Nvbm5lY3QoITApO2NvbnN0IHQ9dGhpcy5wcmVkZWZpbmVkUmVjb25uZWN0SW50ZXJ2YWxzW3RoaXMucmVjb25uZWN0QXR0ZW1wdHNdfHx0aGlzLnByZWRlZmluZWRSZWNvbm5lY3RJbnRlcnZhbHNbdGhpcy5wcmVkZWZpbmVkUmVjb25uZWN0SW50ZXJ2YWxzLmxlbmd0aC0xXTt0aGlzLnJlY29ubmVjdEF0dGVtcHRzKyssdGhpcy5yZWNvbm5lY3RUaW1lb3V0SWQ9c2V0VGltZW91dCgoKCk9Pnt0aGlzLmluaXRDb25uZWN0KCl9KSx0KX1kaXNjb25uZWN0KGU9ITEpe2lmKHRoaXMuY2xpZW50SWQmJnRoaXMub25EaXNjb25uZWN0JiZ0aGlzLm9uRGlzY29ubmVjdChPYmplY3Qua2V5cyh0aGlzLnN1YnNjcmlwdGlvbnMpKSxjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0VGltZW91dElkKSxjbGVhclRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lb3V0SWQpLHRoaXMucmVtb3ZlQWxsU3Vic2NyaXB0aW9uTGlzdGVuZXJzKCksdGhpcy5jbGllbnQuY2FuY2VsUmVxdWVzdCh0aGlzLmdldFN1YnNjcmlwdGlvbnNDYW5jZWxLZXkoKSksdGhpcy5ldmVudFNvdXJjZT8uY2xvc2UoKSx0aGlzLmV2ZW50U291cmNlPW51bGwsdGhpcy5jbGllbnRJZD1cIlwiLCFlKXt0aGlzLnJlY29ubmVjdEF0dGVtcHRzPTA7Zm9yKGxldCBlIG9mIHRoaXMucGVuZGluZ0Nvbm5lY3RzKWUucmVzb2x2ZSgpO3RoaXMucGVuZGluZ0Nvbm5lY3RzPVtdfX19Y2xhc3MgQ3J1ZFNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZXtkZWNvZGUoZSl7cmV0dXJuIGV9YXN5bmMgZ2V0RnVsbExpc3QoZSx0KXtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gdGhpcy5fZ2V0RnVsbExpc3QoZSx0KTtsZXQgcz01MDA7cmV0dXJuKHQ9T2JqZWN0LmFzc2lnbih7fSxlLHQpKS5iYXRjaCYmKHM9dC5iYXRjaCxkZWxldGUgdC5iYXRjaCksdGhpcy5fZ2V0RnVsbExpc3Qocyx0KX1hc3luYyBnZXRMaXN0KGU9MSx0PTMwLHMpe3JldHVybihzPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIkdFVFwifSxzKSkucXVlcnk9T2JqZWN0LmFzc2lnbih7cGFnZTplLHBlclBhZ2U6dH0scy5xdWVyeSksdGhpcy5jbGllbnQuc2VuZCh0aGlzLmJhc2VDcnVkUGF0aCxzKS50aGVuKChlPT4oZS5pdGVtcz1lLml0ZW1zPy5tYXAoKGU9PnRoaXMuZGVjb2RlKGUpKSl8fFtdLGUpKSl9YXN5bmMgZ2V0Rmlyc3RMaXN0SXRlbShlLHQpe3JldHVybih0PU9iamVjdC5hc3NpZ24oe3JlcXVlc3RLZXk6XCJvbmVfYnlfZmlsdGVyX1wiK3RoaXMuYmFzZUNydWRQYXRoK1wiX1wiK2V9LHQpKS5xdWVyeT1PYmplY3QuYXNzaWduKHtmaWx0ZXI6ZSxza2lwVG90YWw6MX0sdC5xdWVyeSksdGhpcy5nZXRMaXN0KDEsMSx0KS50aGVuKChlPT57aWYoIWU/Lml0ZW1zPy5sZW5ndGgpdGhyb3cgbmV3IENsaWVudFJlc3BvbnNlRXJyb3Ioe3N0YXR1czo0MDQscmVzcG9uc2U6e2NvZGU6NDA0LG1lc3NhZ2U6XCJUaGUgcmVxdWVzdGVkIHJlc291cmNlIHdhc24ndCBmb3VuZC5cIixkYXRhOnt9fX0pO3JldHVybiBlLml0ZW1zWzBdfSkpfWFzeW5jIGdldE9uZShlLHQpe2lmKCFlKXRocm93IG5ldyBDbGllbnRSZXNwb25zZUVycm9yKHt1cmw6dGhpcy5jbGllbnQuYnVpbGRVUkwodGhpcy5iYXNlQ3J1ZFBhdGgrXCIvXCIpLHN0YXR1czo0MDQscmVzcG9uc2U6e2NvZGU6NDA0LG1lc3NhZ2U6XCJNaXNzaW5nIHJlcXVpcmVkIHJlY29yZCBpZC5cIixkYXRhOnt9fX0pO3JldHVybiB0PU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIkdFVFwifSx0KSx0aGlzLmNsaWVudC5zZW5kKHRoaXMuYmFzZUNydWRQYXRoK1wiL1wiK2VuY29kZVVSSUNvbXBvbmVudChlKSx0KS50aGVuKChlPT50aGlzLmRlY29kZShlKSkpfWFzeW5jIGNyZWF0ZShlLHQpe3JldHVybiB0PU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIixib2R5OmV9LHQpLHRoaXMuY2xpZW50LnNlbmQodGhpcy5iYXNlQ3J1ZFBhdGgsdCkudGhlbigoZT0+dGhpcy5kZWNvZGUoZSkpKX1hc3luYyB1cGRhdGUoZSx0LHMpe3JldHVybiBzPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBBVENIXCIsYm9keTp0fSxzKSx0aGlzLmNsaWVudC5zZW5kKHRoaXMuYmFzZUNydWRQYXRoK1wiL1wiK2VuY29kZVVSSUNvbXBvbmVudChlKSxzKS50aGVuKChlPT50aGlzLmRlY29kZShlKSkpfWFzeW5jIGRlbGV0ZShlLHQpe3JldHVybiB0PU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIkRFTEVURVwifSx0KSx0aGlzLmNsaWVudC5zZW5kKHRoaXMuYmFzZUNydWRQYXRoK1wiL1wiK2VuY29kZVVSSUNvbXBvbmVudChlKSx0KS50aGVuKCgoKT0+ITApKX1fZ2V0RnVsbExpc3QoZT01MDAsdCl7KHQ9dHx8e30pLnF1ZXJ5PU9iamVjdC5hc3NpZ24oe3NraXBUb3RhbDoxfSx0LnF1ZXJ5KTtsZXQgcz1bXSxyZXF1ZXN0PWFzeW5jIGk9PnRoaXMuZ2V0TGlzdChpLGV8fDUwMCx0KS50aGVuKChlPT57Y29uc3QgdD1lLml0ZW1zO3JldHVybiBzPXMuY29uY2F0KHQpLHQubGVuZ3RoPT1lLnBlclBhZ2U/cmVxdWVzdChpKzEpOnN9KSk7cmV0dXJuIHJlcXVlc3QoMSl9fWZ1bmN0aW9uIG5vcm1hbGl6ZUxlZ2FjeU9wdGlvbnNBcmdzKGUsdCxzLGkpe2NvbnN0IG49dm9pZCAwIT09aTtyZXR1cm4gbnx8dm9pZCAwIT09cz9uPyhjb25zb2xlLndhcm4oZSksdC5ib2R5PU9iamVjdC5hc3NpZ24oe30sdC5ib2R5LHMpLHQucXVlcnk9T2JqZWN0LmFzc2lnbih7fSx0LnF1ZXJ5LGkpLHQpOk9iamVjdC5hc3NpZ24odCxzKTp0fWZ1bmN0aW9uIHJlc2V0QXV0b1JlZnJlc2goZSl7ZS5fcmVzZXRBdXRvUmVmcmVzaD8uKCl9Y2xhc3MgUmVjb3JkU2VydmljZSBleHRlbmRzIENydWRTZXJ2aWNle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksdGhpcy5jb2xsZWN0aW9uSWRPck5hbWU9dH1nZXQgYmFzZUNydWRQYXRoKCl7cmV0dXJuIHRoaXMuYmFzZUNvbGxlY3Rpb25QYXRoK1wiL3JlY29yZHNcIn1nZXQgYmFzZUNvbGxlY3Rpb25QYXRoKCl7cmV0dXJuXCIvYXBpL2NvbGxlY3Rpb25zL1wiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbGxlY3Rpb25JZE9yTmFtZSl9Z2V0IGlzU3VwZXJ1c2Vycygpe3JldHVyblwiX3N1cGVydXNlcnNcIj09dGhpcy5jb2xsZWN0aW9uSWRPck5hbWV8fFwiX3BiY18yNzczODY3Njc1XCI9PXRoaXMuY29sbGVjdGlvbklkT3JOYW1lfWFzeW5jIHN1YnNjcmliZShlLHQscyl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyB0b3BpYy5cIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBzdWJzY3JpcHRpb24gY2FsbGJhY2suXCIpO3JldHVybiB0aGlzLmNsaWVudC5yZWFsdGltZS5zdWJzY3JpYmUodGhpcy5jb2xsZWN0aW9uSWRPck5hbWUrXCIvXCIrZSx0LHMpfWFzeW5jIHVuc3Vic2NyaWJlKGUpe3JldHVybiBlP3RoaXMuY2xpZW50LnJlYWx0aW1lLnVuc3Vic2NyaWJlKHRoaXMuY29sbGVjdGlvbklkT3JOYW1lK1wiL1wiK2UpOnRoaXMuY2xpZW50LnJlYWx0aW1lLnVuc3Vic2NyaWJlQnlQcmVmaXgodGhpcy5jb2xsZWN0aW9uSWRPck5hbWUpfWFzeW5jIGdldEZ1bGxMaXN0KGUsdCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpcmV0dXJuIHN1cGVyLmdldEZ1bGxMaXN0KGUsdCk7Y29uc3Qgcz1PYmplY3QuYXNzaWduKHt9LGUsdCk7cmV0dXJuIHN1cGVyLmdldEZ1bGxMaXN0KHMpfWFzeW5jIGdldExpc3QoZT0xLHQ9MzAscyl7cmV0dXJuIHN1cGVyLmdldExpc3QoZSx0LHMpfWFzeW5jIGdldEZpcnN0TGlzdEl0ZW0oZSx0KXtyZXR1cm4gc3VwZXIuZ2V0Rmlyc3RMaXN0SXRlbShlLHQpfWFzeW5jIGdldE9uZShlLHQpe3JldHVybiBzdXBlci5nZXRPbmUoZSx0KX1hc3luYyBjcmVhdGUoZSx0KXtyZXR1cm4gc3VwZXIuY3JlYXRlKGUsdCl9YXN5bmMgdXBkYXRlKGUsdCxzKXtyZXR1cm4gc3VwZXIudXBkYXRlKGUsdCxzKS50aGVuKChlPT57aWYodGhpcy5jbGllbnQuYXV0aFN0b3JlLnJlY29yZD8uaWQ9PT1lPy5pZCYmKHRoaXMuY2xpZW50LmF1dGhTdG9yZS5yZWNvcmQ/LmNvbGxlY3Rpb25JZD09PXRoaXMuY29sbGVjdGlvbklkT3JOYW1lfHx0aGlzLmNsaWVudC5hdXRoU3RvcmUucmVjb3JkPy5jb2xsZWN0aW9uTmFtZT09PXRoaXMuY29sbGVjdGlvbklkT3JOYW1lKSl7bGV0IHQ9T2JqZWN0LmFzc2lnbih7fSx0aGlzLmNsaWVudC5hdXRoU3RvcmUucmVjb3JkLmV4cGFuZCkscz1PYmplY3QuYXNzaWduKHt9LHRoaXMuY2xpZW50LmF1dGhTdG9yZS5yZWNvcmQsZSk7dCYmKHMuZXhwYW5kPU9iamVjdC5hc3NpZ24odCxlLmV4cGFuZCkpLHRoaXMuY2xpZW50LmF1dGhTdG9yZS5zYXZlKHRoaXMuY2xpZW50LmF1dGhTdG9yZS50b2tlbixzKX1yZXR1cm4gZX0pKX1hc3luYyBkZWxldGUoZSx0KXtyZXR1cm4gc3VwZXIuZGVsZXRlKGUsdCkudGhlbigodD0+KCF0fHx0aGlzLmNsaWVudC5hdXRoU3RvcmUucmVjb3JkPy5pZCE9PWV8fHRoaXMuY2xpZW50LmF1dGhTdG9yZS5yZWNvcmQ/LmNvbGxlY3Rpb25JZCE9PXRoaXMuY29sbGVjdGlvbklkT3JOYW1lJiZ0aGlzLmNsaWVudC5hdXRoU3RvcmUucmVjb3JkPy5jb2xsZWN0aW9uTmFtZSE9PXRoaXMuY29sbGVjdGlvbklkT3JOYW1lfHx0aGlzLmNsaWVudC5hdXRoU3RvcmUuY2xlYXIoKSx0KSkpfWF1dGhSZXNwb25zZShlKXtjb25zdCB0PXRoaXMuZGVjb2RlKGU/LnJlY29yZHx8e30pO3JldHVybiB0aGlzLmNsaWVudC5hdXRoU3RvcmUuc2F2ZShlPy50b2tlbix0KSxPYmplY3QuYXNzaWduKHt9LGUse3Rva2VuOmU/LnRva2VufHxcIlwiLHJlY29yZDp0fSl9YXN5bmMgbGlzdEF1dGhNZXRob2RzKGUpe3JldHVybiBlPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIkdFVFwiLGZpZWxkczpcIm1mYSxvdHAscGFzc3dvcmQsb2F1dGgyXCJ9LGUpLHRoaXMuY2xpZW50LnNlbmQodGhpcy5iYXNlQ29sbGVjdGlvblBhdGgrXCIvYXV0aC1tZXRob2RzXCIsZSl9YXN5bmMgYXV0aFdpdGhQYXNzd29yZChlLHQscyl7bGV0IGk7cz1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJQT1NUXCIsYm9keTp7aWRlbnRpdHk6ZSxwYXNzd29yZDp0fX0scyksdGhpcy5pc1N1cGVydXNlcnMmJihpPXMuYXV0b1JlZnJlc2hUaHJlc2hvbGQsZGVsZXRlIHMuYXV0b1JlZnJlc2hUaHJlc2hvbGQscy5hdXRvUmVmcmVzaHx8cmVzZXRBdXRvUmVmcmVzaCh0aGlzLmNsaWVudCkpO2xldCBuPWF3YWl0IHRoaXMuY2xpZW50LnNlbmQodGhpcy5iYXNlQ29sbGVjdGlvblBhdGgrXCIvYXV0aC13aXRoLXBhc3N3b3JkXCIscyk7cmV0dXJuIG49dGhpcy5hdXRoUmVzcG9uc2UobiksaSYmdGhpcy5pc1N1cGVydXNlcnMmJmZ1bmN0aW9uIHJlZ2lzdGVyQXV0b1JlZnJlc2goZSx0LHMsaSl7cmVzZXRBdXRvUmVmcmVzaChlKTtjb25zdCBuPWUuYmVmb3JlU2VuZCxyPWUuYXV0aFN0b3JlLnJlY29yZCxvPWUuYXV0aFN0b3JlLm9uQ2hhbmdlKCgodCxzKT0+eyghdHx8cz8uaWQhPXI/LmlkfHwocz8uY29sbGVjdGlvbklkfHxyPy5jb2xsZWN0aW9uSWQpJiZzPy5jb2xsZWN0aW9uSWQhPXI/LmNvbGxlY3Rpb25JZCkmJnJlc2V0QXV0b1JlZnJlc2goZSl9KSk7ZS5fcmVzZXRBdXRvUmVmcmVzaD1mdW5jdGlvbigpe28oKSxlLmJlZm9yZVNlbmQ9bixkZWxldGUgZS5fcmVzZXRBdXRvUmVmcmVzaH0sZS5iZWZvcmVTZW5kPWFzeW5jKHIsbyk9Pntjb25zdCBhPWUuYXV0aFN0b3JlLnRva2VuO2lmKG8ucXVlcnk/LmF1dG9SZWZyZXNoKXJldHVybiBuP24ocixvKTp7dXJsOnIsc2VuZE9wdGlvbnM6b307bGV0IGM9ZS5hdXRoU3RvcmUuaXNWYWxpZDtpZihjJiZpc1Rva2VuRXhwaXJlZChlLmF1dGhTdG9yZS50b2tlbix0KSl0cnl7YXdhaXQgcygpfWNhdGNoKGUpe2M9ITF9Y3x8YXdhaXQgaSgpO2NvbnN0IGw9by5oZWFkZXJzfHx7fTtmb3IobGV0IHQgaW4gbClpZihcImF1dGhvcml6YXRpb25cIj09dC50b0xvd2VyQ2FzZSgpJiZhPT1sW3RdJiZlLmF1dGhTdG9yZS50b2tlbil7bFt0XT1lLmF1dGhTdG9yZS50b2tlbjticmVha31yZXR1cm4gby5oZWFkZXJzPWwsbj9uKHIsbyk6e3VybDpyLHNlbmRPcHRpb25zOm99fX0odGhpcy5jbGllbnQsaSwoKCk9PnRoaXMuYXV0aFJlZnJlc2goe2F1dG9SZWZyZXNoOiEwfSkpLCgoKT0+dGhpcy5hdXRoV2l0aFBhc3N3b3JkKGUsdCxPYmplY3QuYXNzaWduKHthdXRvUmVmcmVzaDohMH0scykpKSksbn1hc3luYyBhdXRoV2l0aE9BdXRoMkNvZGUoZSx0LHMsaSxuLHIsbyl7bGV0IGE9e21ldGhvZDpcIlBPU1RcIixib2R5Ontwcm92aWRlcjplLGNvZGU6dCxjb2RlVmVyaWZpZXI6cyxyZWRpcmVjdFVSTDppLGNyZWF0ZURhdGE6bn19O3JldHVybiBhPW5vcm1hbGl6ZUxlZ2FjeU9wdGlvbnNBcmdzKFwiVGhpcyBmb3JtIG9mIGF1dGhXaXRoT0F1dGgyQ29kZShwcm92aWRlciwgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSTCwgY3JlYXRlRGF0YT8sIGJvZHk/LCBxdWVyeT8pIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIHJlcGxhY2luZyBpdCB3aXRoIGF1dGhXaXRoT0F1dGgyQ29kZShwcm92aWRlciwgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSTCwgY3JlYXRlRGF0YT8sIG9wdGlvbnM/KS5cIixhLHIsbyksdGhpcy5jbGllbnQuc2VuZCh0aGlzLmJhc2VDb2xsZWN0aW9uUGF0aCtcIi9hdXRoLXdpdGgtb2F1dGgyXCIsYSkudGhlbigoZT0+dGhpcy5hdXRoUmVzcG9uc2UoZSkpKX1hdXRoV2l0aE9BdXRoMiguLi5lKXtpZihlLmxlbmd0aD4xfHxcInN0cmluZ1wiPT10eXBlb2YgZT8uWzBdKXJldHVybiBjb25zb2xlLndhcm4oXCJQb2NrZXRCYXNlOiBUaGlzIGZvcm0gb2YgYXV0aFdpdGhPQXV0aDIoKSBpcyBkZXByZWNhdGVkIGFuZCBtYXkgZ2V0IHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gUGxlYXNlIHJlcGxhY2Ugd2l0aCBhdXRoV2l0aE9BdXRoMkNvZGUoKSBPUiB1c2UgdGhlIGF1dGhXaXRoT0F1dGgyKCkgcmVhbHRpbWUgZm9ybSBhcyBzaG93biBpbiBodHRwczovL3BvY2tldGJhc2UuaW8vZG9jcy9hdXRoZW50aWNhdGlvbi8jb2F1dGgyLWludGVncmF0aW9uLlwiKSx0aGlzLmF1dGhXaXRoT0F1dGgyQ29kZShlPy5bMF18fFwiXCIsZT8uWzFdfHxcIlwiLGU/LlsyXXx8XCJcIixlPy5bM118fFwiXCIsZT8uWzRdfHx7fSxlPy5bNV18fHt9LGU/Lls2XXx8e30pO2NvbnN0IHQ9ZT8uWzBdfHx7fTtsZXQgcz1udWxsO3QudXJsQ2FsbGJhY2t8fChzPW9wZW5Ccm93c2VyUG9wdXAodm9pZCAwKSk7Y29uc3QgaT1uZXcgUmVhbHRpbWVTZXJ2aWNlKHRoaXMuY2xpZW50KTtmdW5jdGlvbiBjbGVhbnVwKCl7cz8uY2xvc2UoKSxpLnVuc3Vic2NyaWJlKCl9Y29uc3Qgbj17fSxyPXQucmVxdWVzdEtleTtyZXR1cm4gciYmKG4ucmVxdWVzdEtleT1yKSx0aGlzLmxpc3RBdXRoTWV0aG9kcyhuKS50aGVuKChlPT57Y29uc3Qgbj1lLm9hdXRoMi5wcm92aWRlcnMuZmluZCgoZT0+ZS5uYW1lPT09dC5wcm92aWRlcikpO2lmKCFuKXRocm93IG5ldyBDbGllbnRSZXNwb25zZUVycm9yKG5ldyBFcnJvcihgTWlzc2luZyBvciBpbnZhbGlkIHByb3ZpZGVyIFwiJHt0LnByb3ZpZGVyfVwiLmApKTtjb25zdCBvPXRoaXMuY2xpZW50LmJ1aWxkVVJMKFwiL2FwaS9vYXV0aDItcmVkaXJlY3RcIiksYT1yP3RoaXMuY2xpZW50LmNhbmNlbENvbnRyb2xsZXJzPy5bcl06dm9pZCAwO3JldHVybiBhJiYoYS5zaWduYWwub25hYm9ydD0oKT0+e2NsZWFudXAoKX0pLG5ldyBQcm9taXNlKChhc3luYyhlLHIpPT57dHJ5e2F3YWl0IGkuc3Vic2NyaWJlKFwiQG9hdXRoMlwiLChhc3luYyBzPT57Y29uc3QgYz1pLmNsaWVudElkO3RyeXtpZighcy5zdGF0ZXx8YyE9PXMuc3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgcGFyYW1ldGVycyBkb24ndCBtYXRjaC5cIik7aWYocy5lcnJvcnx8IXMuY29kZSl0aHJvdyBuZXcgRXJyb3IoXCJPQXV0aDIgcmVkaXJlY3QgZXJyb3Igb3IgbWlzc2luZyBjb2RlOiBcIitzLmVycm9yKTtjb25zdCBpPU9iamVjdC5hc3NpZ24oe30sdCk7ZGVsZXRlIGkucHJvdmlkZXIsZGVsZXRlIGkuc2NvcGVzLGRlbGV0ZSBpLmNyZWF0ZURhdGEsZGVsZXRlIGkudXJsQ2FsbGJhY2ssYT8uc2lnbmFsPy5vbmFib3J0JiYoYS5zaWduYWwub25hYm9ydD1udWxsKTtjb25zdCByPWF3YWl0IHRoaXMuYXV0aFdpdGhPQXV0aDJDb2RlKG4ubmFtZSxzLmNvZGUsbi5jb2RlVmVyaWZpZXIsbyx0LmNyZWF0ZURhdGEsaSk7ZShyKX1jYXRjaChlKXtyKG5ldyBDbGllbnRSZXNwb25zZUVycm9yKGUpKX1jbGVhbnVwKCl9KSk7Y29uc3QgYz17c3RhdGU6aS5jbGllbnRJZH07dC5zY29wZXM/Lmxlbmd0aCYmKGMuc2NvcGU9dC5zY29wZXMuam9pbihcIiBcIikpO2NvbnN0IGw9dGhpcy5fcmVwbGFjZVF1ZXJ5UGFyYW1zKG4uYXV0aFVSTCtvLGMpO2xldCBoPXQudXJsQ2FsbGJhY2t8fGZ1bmN0aW9uKGUpe3M/cy5sb2NhdGlvbi5ocmVmPWU6cz1vcGVuQnJvd3NlclBvcHVwKGUpfTthd2FpdCBoKGwpfWNhdGNoKGUpe2NsZWFudXAoKSxyKG5ldyBDbGllbnRSZXNwb25zZUVycm9yKGUpKX19KSl9KSkuY2F0Y2goKGU9Pnt0aHJvdyBjbGVhbnVwKCksZX0pKX1hc3luYyBhdXRoUmVmcmVzaChlLHQpe2xldCBzPXttZXRob2Q6XCJQT1NUXCJ9O3JldHVybiBzPW5vcm1hbGl6ZUxlZ2FjeU9wdGlvbnNBcmdzKFwiVGhpcyBmb3JtIG9mIGF1dGhSZWZyZXNoKGJvZHk/LCBxdWVyeT8pIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIHJlcGxhY2luZyBpdCB3aXRoIGF1dGhSZWZyZXNoKG9wdGlvbnM/KS5cIixzLGUsdCksdGhpcy5jbGllbnQuc2VuZCh0aGlzLmJhc2VDb2xsZWN0aW9uUGF0aCtcIi9hdXRoLXJlZnJlc2hcIixzKS50aGVuKChlPT50aGlzLmF1dGhSZXNwb25zZShlKSkpfWFzeW5jIHJlcXVlc3RQYXNzd29yZFJlc2V0KGUsdCxzKXtsZXQgaT17bWV0aG9kOlwiUE9TVFwiLGJvZHk6e2VtYWlsOmV9fTtyZXR1cm4gaT1ub3JtYWxpemVMZWdhY3lPcHRpb25zQXJncyhcIlRoaXMgZm9ybSBvZiByZXF1ZXN0UGFzc3dvcmRSZXNldChlbWFpbCwgYm9keT8sIHF1ZXJ5PykgaXMgZGVwcmVjYXRlZC4gQ29uc2lkZXIgcmVwbGFjaW5nIGl0IHdpdGggcmVxdWVzdFBhc3N3b3JkUmVzZXQoZW1haWwsIG9wdGlvbnM/KS5cIixpLHQscyksdGhpcy5jbGllbnQuc2VuZCh0aGlzLmJhc2VDb2xsZWN0aW9uUGF0aCtcIi9yZXF1ZXN0LXBhc3N3b3JkLXJlc2V0XCIsaSkudGhlbigoKCk9PiEwKSl9YXN5bmMgY29uZmlybVBhc3N3b3JkUmVzZXQoZSx0LHMsaSxuKXtsZXQgcj17bWV0aG9kOlwiUE9TVFwiLGJvZHk6e3Rva2VuOmUscGFzc3dvcmQ6dCxwYXNzd29yZENvbmZpcm06c319O3JldHVybiByPW5vcm1hbGl6ZUxlZ2FjeU9wdGlvbnNBcmdzKFwiVGhpcyBmb3JtIG9mIGNvbmZpcm1QYXNzd29yZFJlc2V0KHRva2VuLCBwYXNzd29yZCwgcGFzc3dvcmRDb25maXJtLCBib2R5PywgcXVlcnk/KSBpcyBkZXByZWNhdGVkLiBDb25zaWRlciByZXBsYWNpbmcgaXQgd2l0aCBjb25maXJtUGFzc3dvcmRSZXNldCh0b2tlbiwgcGFzc3dvcmQsIHBhc3N3b3JkQ29uZmlybSwgb3B0aW9ucz8pLlwiLHIsaSxuKSx0aGlzLmNsaWVudC5zZW5kKHRoaXMuYmFzZUNvbGxlY3Rpb25QYXRoK1wiL2NvbmZpcm0tcGFzc3dvcmQtcmVzZXRcIixyKS50aGVuKCgoKT0+ITApKX1hc3luYyByZXF1ZXN0VmVyaWZpY2F0aW9uKGUsdCxzKXtsZXQgaT17bWV0aG9kOlwiUE9TVFwiLGJvZHk6e2VtYWlsOmV9fTtyZXR1cm4gaT1ub3JtYWxpemVMZWdhY3lPcHRpb25zQXJncyhcIlRoaXMgZm9ybSBvZiByZXF1ZXN0VmVyaWZpY2F0aW9uKGVtYWlsLCBib2R5PywgcXVlcnk/KSBpcyBkZXByZWNhdGVkLiBDb25zaWRlciByZXBsYWNpbmcgaXQgd2l0aCByZXF1ZXN0VmVyaWZpY2F0aW9uKGVtYWlsLCBvcHRpb25zPykuXCIsaSx0LHMpLHRoaXMuY2xpZW50LnNlbmQodGhpcy5iYXNlQ29sbGVjdGlvblBhdGgrXCIvcmVxdWVzdC12ZXJpZmljYXRpb25cIixpKS50aGVuKCgoKT0+ITApKX1hc3luYyBjb25maXJtVmVyaWZpY2F0aW9uKGUsdCxzKXtsZXQgaT17bWV0aG9kOlwiUE9TVFwiLGJvZHk6e3Rva2VuOmV9fTtyZXR1cm4gaT1ub3JtYWxpemVMZWdhY3lPcHRpb25zQXJncyhcIlRoaXMgZm9ybSBvZiBjb25maXJtVmVyaWZpY2F0aW9uKHRva2VuLCBib2R5PywgcXVlcnk/KSBpcyBkZXByZWNhdGVkLiBDb25zaWRlciByZXBsYWNpbmcgaXQgd2l0aCBjb25maXJtVmVyaWZpY2F0aW9uKHRva2VuLCBvcHRpb25zPykuXCIsaSx0LHMpLHRoaXMuY2xpZW50LnNlbmQodGhpcy5iYXNlQ29sbGVjdGlvblBhdGgrXCIvY29uZmlybS12ZXJpZmljYXRpb25cIixpKS50aGVuKCgoKT0+e2NvbnN0IHQ9Z2V0VG9rZW5QYXlsb2FkKGUpLHM9dGhpcy5jbGllbnQuYXV0aFN0b3JlLnJlY29yZDtyZXR1cm4gcyYmIXMudmVyaWZpZWQmJnMuaWQ9PT10LmlkJiZzLmNvbGxlY3Rpb25JZD09PXQuY29sbGVjdGlvbklkJiYocy52ZXJpZmllZD0hMCx0aGlzLmNsaWVudC5hdXRoU3RvcmUuc2F2ZSh0aGlzLmNsaWVudC5hdXRoU3RvcmUudG9rZW4scykpLCEwfSkpfWFzeW5jIHJlcXVlc3RFbWFpbENoYW5nZShlLHQscyl7bGV0IGk9e21ldGhvZDpcIlBPU1RcIixib2R5OntuZXdFbWFpbDplfX07cmV0dXJuIGk9bm9ybWFsaXplTGVnYWN5T3B0aW9uc0FyZ3MoXCJUaGlzIGZvcm0gb2YgcmVxdWVzdEVtYWlsQ2hhbmdlKG5ld0VtYWlsLCBib2R5PywgcXVlcnk/KSBpcyBkZXByZWNhdGVkLiBDb25zaWRlciByZXBsYWNpbmcgaXQgd2l0aCByZXF1ZXN0RW1haWxDaGFuZ2UobmV3RW1haWwsIG9wdGlvbnM/KS5cIixpLHQscyksdGhpcy5jbGllbnQuc2VuZCh0aGlzLmJhc2VDb2xsZWN0aW9uUGF0aCtcIi9yZXF1ZXN0LWVtYWlsLWNoYW5nZVwiLGkpLnRoZW4oKCgpPT4hMCkpfWFzeW5jIGNvbmZpcm1FbWFpbENoYW5nZShlLHQscyxpKXtsZXQgbj17bWV0aG9kOlwiUE9TVFwiLGJvZHk6e3Rva2VuOmUscGFzc3dvcmQ6dH19O3JldHVybiBuPW5vcm1hbGl6ZUxlZ2FjeU9wdGlvbnNBcmdzKFwiVGhpcyBmb3JtIG9mIGNvbmZpcm1FbWFpbENoYW5nZSh0b2tlbiwgcGFzc3dvcmQsIGJvZHk/LCBxdWVyeT8pIGlzIGRlcHJlY2F0ZWQuIENvbnNpZGVyIHJlcGxhY2luZyBpdCB3aXRoIGNvbmZpcm1FbWFpbENoYW5nZSh0b2tlbiwgcGFzc3dvcmQsIG9wdGlvbnM/KS5cIixuLHMsaSksdGhpcy5jbGllbnQuc2VuZCh0aGlzLmJhc2VDb2xsZWN0aW9uUGF0aCtcIi9jb25maXJtLWVtYWlsLWNoYW5nZVwiLG4pLnRoZW4oKCgpPT57Y29uc3QgdD1nZXRUb2tlblBheWxvYWQoZSkscz10aGlzLmNsaWVudC5hdXRoU3RvcmUucmVjb3JkO3JldHVybiBzJiZzLmlkPT09dC5pZCYmcy5jb2xsZWN0aW9uSWQ9PT10LmNvbGxlY3Rpb25JZCYmdGhpcy5jbGllbnQuYXV0aFN0b3JlLmNsZWFyKCksITB9KSl9YXN5bmMgbGlzdEV4dGVybmFsQXV0aHMoZSx0KXtyZXR1cm4gdGhpcy5jbGllbnQuY29sbGVjdGlvbihcIl9leHRlcm5hbEF1dGhzXCIpLmdldEZ1bGxMaXN0KE9iamVjdC5hc3NpZ24oe30sdCx7ZmlsdGVyOnRoaXMuY2xpZW50LmZpbHRlcihcInJlY29yZFJlZiA9IHs6aWR9XCIse2lkOmV9KX0pKX1hc3luYyB1bmxpbmtFeHRlcm5hbEF1dGgoZSx0LHMpe2NvbnN0IGk9YXdhaXQgdGhpcy5jbGllbnQuY29sbGVjdGlvbihcIl9leHRlcm5hbEF1dGhzXCIpLmdldEZpcnN0TGlzdEl0ZW0odGhpcy5jbGllbnQuZmlsdGVyKFwicmVjb3JkUmVmID0gezpyZWNvcmRJZH0gJiYgcHJvdmlkZXIgPSB7OnByb3ZpZGVyfVwiLHtyZWNvcmRJZDplLHByb3ZpZGVyOnR9KSk7cmV0dXJuIHRoaXMuY2xpZW50LmNvbGxlY3Rpb24oXCJfZXh0ZXJuYWxBdXRoc1wiKS5kZWxldGUoaS5pZCxzKS50aGVuKCgoKT0+ITApKX1hc3luYyByZXF1ZXN0T1RQKGUsdCl7cmV0dXJuIHQ9T2JqZWN0LmFzc2lnbih7bWV0aG9kOlwiUE9TVFwiLGJvZHk6e2VtYWlsOmV9fSx0KSx0aGlzLmNsaWVudC5zZW5kKHRoaXMuYmFzZUNvbGxlY3Rpb25QYXRoK1wiL3JlcXVlc3Qtb3RwXCIsdCl9YXN5bmMgYXV0aFdpdGhPVFAoZSx0LHMpe3JldHVybiBzPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIixib2R5OntvdHBJZDplLHBhc3N3b3JkOnR9fSxzKSx0aGlzLmNsaWVudC5zZW5kKHRoaXMuYmFzZUNvbGxlY3Rpb25QYXRoK1wiL2F1dGgtd2l0aC1vdHBcIixzKS50aGVuKChlPT50aGlzLmF1dGhSZXNwb25zZShlKSkpfWFzeW5jIGltcGVyc29uYXRlKGUsdCxzKXsocz1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJQT1NUXCIsYm9keTp7ZHVyYXRpb246dH19LHMpKS5oZWFkZXJzPXMuaGVhZGVyc3x8e30scy5oZWFkZXJzLkF1dGhvcml6YXRpb258fChzLmhlYWRlcnMuQXV0aG9yaXphdGlvbj10aGlzLmNsaWVudC5hdXRoU3RvcmUudG9rZW4pO2NvbnN0IGk9bmV3IENsaWVudCh0aGlzLmNsaWVudC5iYXNlVVJMLG5ldyBCYXNlQXV0aFN0b3JlLHRoaXMuY2xpZW50LmxhbmcpLG49YXdhaXQgaS5zZW5kKHRoaXMuYmFzZUNvbGxlY3Rpb25QYXRoK1wiL2ltcGVyc29uYXRlL1wiK2VuY29kZVVSSUNvbXBvbmVudChlKSxzKTtyZXR1cm4gaS5hdXRoU3RvcmUuc2F2ZShuPy50b2tlbix0aGlzLmRlY29kZShuPy5yZWNvcmR8fHt9KSksaX1fcmVwbGFjZVF1ZXJ5UGFyYW1zKGUsdD17fSl7bGV0IHM9ZSxpPVwiXCI7ZS5pbmRleE9mKFwiP1wiKT49MCYmKHM9ZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoXCI/XCIpKSxpPWUuc3Vic3RyaW5nKGUuaW5kZXhPZihcIj9cIikrMSkpO2NvbnN0IG49e30scj1pLnNwbGl0KFwiJlwiKTtmb3IoY29uc3QgZSBvZiByKXtpZihcIlwiPT1lKWNvbnRpbnVlO2NvbnN0IHQ9ZS5zcGxpdChcIj1cIik7bltkZWNvZGVVUklDb21wb25lbnQodFswXS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpXT1kZWNvZGVVUklDb21wb25lbnQoKHRbMV18fFwiXCIpLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSl9Zm9yKGxldCBlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKG51bGw9PXRbZV0/ZGVsZXRlIG5bZV06bltlXT10W2VdKTtpPVwiXCI7Zm9yKGxldCBlIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShlKSYmKFwiXCIhPWkmJihpKz1cIiZcIiksaSs9ZW5jb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvJTIwL2csXCIrXCIpKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQobltlXS5yZXBsYWNlKC8lMjAvZyxcIitcIikpKTtyZXR1cm5cIlwiIT1pP3MrXCI/XCIraTpzfX1mdW5jdGlvbiBvcGVuQnJvd3NlclBvcHVwKGUpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3c/Lm9wZW4pdGhyb3cgbmV3IENsaWVudFJlc3BvbnNlRXJyb3IobmV3IEVycm9yKFwiTm90IGluIGEgYnJvd3NlciBjb250ZXh0IC0gcGxlYXNlIHBhc3MgYSBjdXN0b20gdXJsQ2FsbGJhY2sgZnVuY3Rpb24uXCIpKTtsZXQgdD0xMDI0LHM9NzY4LGk9d2luZG93LmlubmVyV2lkdGgsbj13aW5kb3cuaW5uZXJIZWlnaHQ7dD10Pmk/aTp0LHM9cz5uP246cztsZXQgcj1pLzItdC8yLG89bi8yLXMvMjtyZXR1cm4gd2luZG93Lm9wZW4oZSxcInBvcHVwX3dpbmRvd1wiLFwid2lkdGg9XCIrdCtcIixoZWlnaHQ9XCIrcytcIix0b3A9XCIrbytcIixsZWZ0PVwiK3IrXCIscmVzaXphYmxlLG1lbnViYXI9bm9cIil9Y2xhc3MgQ29sbGVjdGlvblNlcnZpY2UgZXh0ZW5kcyBDcnVkU2VydmljZXtnZXQgYmFzZUNydWRQYXRoKCl7cmV0dXJuXCIvYXBpL2NvbGxlY3Rpb25zXCJ9YXN5bmMgaW1wb3J0KGUsdD0hMSxzKXtyZXR1cm4gcz1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJQVVRcIixib2R5Ontjb2xsZWN0aW9uczplLGRlbGV0ZU1pc3Npbmc6dH19LHMpLHRoaXMuY2xpZW50LnNlbmQodGhpcy5iYXNlQ3J1ZFBhdGgrXCIvaW1wb3J0XCIscykudGhlbigoKCk9PiEwKSl9YXN5bmMgZ2V0U2NhZmZvbGRzKGUpe3JldHVybiBlPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIkdFVFwifSxlKSx0aGlzLmNsaWVudC5zZW5kKHRoaXMuYmFzZUNydWRQYXRoK1wiL21ldGEvc2NhZmZvbGRzXCIsZSl9YXN5bmMgdHJ1bmNhdGUoZSx0KXtyZXR1cm4gdD1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJERUxFVEVcIn0sdCksdGhpcy5jbGllbnQuc2VuZCh0aGlzLmJhc2VDcnVkUGF0aCtcIi9cIitlbmNvZGVVUklDb21wb25lbnQoZSkrXCIvdHJ1bmNhdGVcIix0KS50aGVuKCgoKT0+ITApKX19Y2xhc3MgTG9nU2VydmljZSBleHRlbmRzIEJhc2VTZXJ2aWNle2FzeW5jIGdldExpc3QoZT0xLHQ9MzAscyl7cmV0dXJuKHM9T2JqZWN0LmFzc2lnbih7bWV0aG9kOlwiR0VUXCJ9LHMpKS5xdWVyeT1PYmplY3QuYXNzaWduKHtwYWdlOmUscGVyUGFnZTp0fSxzLnF1ZXJ5KSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9sb2dzXCIscyl9YXN5bmMgZ2V0T25lKGUsdCl7aWYoIWUpdGhyb3cgbmV3IENsaWVudFJlc3BvbnNlRXJyb3Ioe3VybDp0aGlzLmNsaWVudC5idWlsZFVSTChcIi9hcGkvbG9ncy9cIiksc3RhdHVzOjQwNCxyZXNwb25zZTp7Y29kZTo0MDQsbWVzc2FnZTpcIk1pc3NpbmcgcmVxdWlyZWQgbG9nIGlkLlwiLGRhdGE6e319fSk7cmV0dXJuIHQ9T2JqZWN0LmFzc2lnbih7bWV0aG9kOlwiR0VUXCJ9LHQpLHRoaXMuY2xpZW50LnNlbmQoXCIvYXBpL2xvZ3MvXCIrZW5jb2RlVVJJQ29tcG9uZW50KGUpLHQpfWFzeW5jIGdldFN0YXRzKGUpe3JldHVybiBlPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIkdFVFwifSxlKSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9sb2dzL3N0YXRzXCIsZSl9fWNsYXNzIEhlYWx0aFNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZXthc3luYyBjaGVjayhlKXtyZXR1cm4gZT1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJHRVRcIn0sZSksdGhpcy5jbGllbnQuc2VuZChcIi9hcGkvaGVhbHRoXCIsZSl9fWNsYXNzIEZpbGVTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2V7Z2V0VXJsKGUsdCxzPXt9KXtyZXR1cm4gY29uc29sZS53YXJuKFwiUGxlYXNlIHJlcGxhY2UgcGIuZmlsZXMuZ2V0VXJsKCkgd2l0aCBwYi5maWxlcy5nZXRVUkwoKVwiKSx0aGlzLmdldFVSTChlLHQscyl9Z2V0VVJMKGUsdCxzPXt9KXtpZighdHx8IWU/LmlkfHwhZT8uY29sbGVjdGlvbklkJiYhZT8uY29sbGVjdGlvbk5hbWUpcmV0dXJuXCJcIjtjb25zdCBpPVtdO2kucHVzaChcImFwaVwiKSxpLnB1c2goXCJmaWxlc1wiKSxpLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGUuY29sbGVjdGlvbklkfHxlLmNvbGxlY3Rpb25OYW1lKSksaS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChlLmlkKSksaS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudCh0KSk7bGV0IG49dGhpcy5jbGllbnQuYnVpbGRVUkwoaS5qb2luKFwiL1wiKSk7aWYoT2JqZWN0LmtleXMocykubGVuZ3RoKXshMT09PXMuZG93bmxvYWQmJmRlbGV0ZSBzLmRvd25sb2FkO2NvbnN0IGU9bmV3IFVSTFNlYXJjaFBhcmFtcyhzKTtuKz0obi5pbmNsdWRlcyhcIj9cIik/XCImXCI6XCI/XCIpK2V9cmV0dXJuIG59YXN5bmMgZ2V0VG9rZW4oZSl7cmV0dXJuIGU9T2JqZWN0LmFzc2lnbih7bWV0aG9kOlwiUE9TVFwifSxlKSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9maWxlcy90b2tlblwiLGUpLnRoZW4oKGU9PmU/LnRva2VufHxcIlwiKSl9fWNsYXNzIEJhY2t1cFNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZXthc3luYyBnZXRGdWxsTGlzdChlKXtyZXR1cm4gZT1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJHRVRcIn0sZSksdGhpcy5jbGllbnQuc2VuZChcIi9hcGkvYmFja3Vwc1wiLGUpfWFzeW5jIGNyZWF0ZShlLHQpe3JldHVybiB0PU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIixib2R5OntuYW1lOmV9fSx0KSx0aGlzLmNsaWVudC5zZW5kKFwiL2FwaS9iYWNrdXBzXCIsdCkudGhlbigoKCk9PiEwKSl9YXN5bmMgdXBsb2FkKGUsdCl7cmV0dXJuIHQ9T2JqZWN0LmFzc2lnbih7bWV0aG9kOlwiUE9TVFwiLGJvZHk6ZX0sdCksdGhpcy5jbGllbnQuc2VuZChcIi9hcGkvYmFja3Vwcy91cGxvYWRcIix0KS50aGVuKCgoKT0+ITApKX1hc3luYyBkZWxldGUoZSx0KXtyZXR1cm4gdD1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJERUxFVEVcIn0sdCksdGhpcy5jbGllbnQuc2VuZChgL2FwaS9iYWNrdXBzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGUpfWAsdCkudGhlbigoKCk9PiEwKSl9YXN5bmMgcmVzdG9yZShlLHQpe3JldHVybiB0PU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIn0sdCksdGhpcy5jbGllbnQuc2VuZChgL2FwaS9iYWNrdXBzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGUpfS9yZXN0b3JlYCx0KS50aGVuKCgoKT0+ITApKX1nZXREb3dubG9hZFVybChlLHQpe3JldHVybiBjb25zb2xlLndhcm4oXCJQbGVhc2UgcmVwbGFjZSBwYi5iYWNrdXBzLmdldERvd25sb2FkVXJsKCkgd2l0aCBwYi5iYWNrdXBzLmdldERvd25sb2FkVVJMKClcIiksdGhpcy5nZXREb3dubG9hZFVSTChlLHQpfWdldERvd25sb2FkVVJMKGUsdCl7cmV0dXJuIHRoaXMuY2xpZW50LmJ1aWxkVVJMKGAvYXBpL2JhY2t1cHMvJHtlbmNvZGVVUklDb21wb25lbnQodCl9P3Rva2VuPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGUpfWApfX1mdW5jdGlvbiBpc0ZpbGUoZSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJsb2ImJmUgaW5zdGFuY2VvZiBCbG9ifHxcInVuZGVmaW5lZFwiIT10eXBlb2YgRmlsZSYmZSBpbnN0YW5jZW9mIEZpbGV8fG51bGwhPT1lJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZS51cmkmJihcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZcIlJlYWN0TmF0aXZlXCI9PT1uYXZpZ2F0b3IucHJvZHVjdHx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmZ2xvYmFsLkhlcm1lc0ludGVybmFsKX1mdW5jdGlvbiBpc0Zvcm1EYXRhKGUpe3JldHVybiBlJiYoXCJGb3JtRGF0YVwiPT09ZS5jb25zdHJ1Y3Rvci5uYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgRm9ybURhdGEmJmUgaW5zdGFuY2VvZiBGb3JtRGF0YSl9ZnVuY3Rpb24gaGFzRmlsZUZpZWxkKGUpe2Zvcihjb25zdCB0IGluIGUpe2NvbnN0IHM9QXJyYXkuaXNBcnJheShlW3RdKT9lW3RdOltlW3RdXTtmb3IoY29uc3QgZSBvZiBzKWlmKGlzRmlsZShlKSlyZXR1cm4hMH1yZXR1cm4hMX1jb25zdCByPS9eW1xcLVxcLlxcZF0rJC87ZnVuY3Rpb24gaW5mZXJGb3JtRGF0YVZhbHVlKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBlO2lmKFwidHJ1ZVwiPT1lKXJldHVybiEwO2lmKFwiZmFsc2VcIj09ZSlyZXR1cm4hMTtpZigoXCItXCI9PT1lWzBdfHxlWzBdPj1cIjBcIiYmZVswXTw9XCI5XCIpJiZyLnRlc3QoZSkpe2xldCB0PStlO2lmKFwiXCIrdD09PWUpcmV0dXJuIHR9cmV0dXJuIGV9Y2xhc3MgQmF0Y2hTZXJ2aWNlIGV4dGVuZHMgQmFzZVNlcnZpY2V7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMucmVxdWVzdHM9W10sdGhpcy5zdWJzPXt9fWNvbGxlY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3Vic1tlXXx8KHRoaXMuc3Vic1tlXT1uZXcgU3ViQmF0Y2hTZXJ2aWNlKHRoaXMucmVxdWVzdHMsZSkpLHRoaXMuc3Vic1tlXX1hc3luYyBzZW5kKGUpe2NvbnN0IHQ9bmV3IEZvcm1EYXRhLHM9W107Zm9yKGxldCBlPTA7ZTx0aGlzLnJlcXVlc3RzLmxlbmd0aDtlKyspe2NvbnN0IGk9dGhpcy5yZXF1ZXN0c1tlXTtpZihzLnB1c2goe21ldGhvZDppLm1ldGhvZCx1cmw6aS51cmwsaGVhZGVyczppLmhlYWRlcnMsYm9keTppLmpzb259KSxpLmZpbGVzKWZvcihsZXQgcyBpbiBpLmZpbGVzKXtjb25zdCBuPWkuZmlsZXNbc118fFtdO2ZvcihsZXQgaSBvZiBuKXQuYXBwZW5kKFwicmVxdWVzdHMuXCIrZStcIi5cIitzLGkpfX1yZXR1cm4gdC5hcHBlbmQoXCJAanNvblBheWxvYWRcIixKU09OLnN0cmluZ2lmeSh7cmVxdWVzdHM6c30pKSxlPU9iamVjdC5hc3NpZ24oe21ldGhvZDpcIlBPU1RcIixib2R5OnR9LGUpLHRoaXMuY2xpZW50LnNlbmQoXCIvYXBpL2JhdGNoXCIsZSl9fWNsYXNzIFN1YkJhdGNoU2VydmljZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMucmVxdWVzdHM9W10sdGhpcy5yZXF1ZXN0cz1lLHRoaXMuY29sbGVjdGlvbklkT3JOYW1lPXR9dXBzZXJ0KGUsdCl7dD1PYmplY3QuYXNzaWduKHtib2R5OmV8fHt9fSx0KTtjb25zdCBzPXttZXRob2Q6XCJQVVRcIix1cmw6XCIvYXBpL2NvbGxlY3Rpb25zL1wiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbGxlY3Rpb25JZE9yTmFtZSkrXCIvcmVjb3Jkc1wifTt0aGlzLnByZXBhcmVSZXF1ZXN0KHMsdCksdGhpcy5yZXF1ZXN0cy5wdXNoKHMpfWNyZWF0ZShlLHQpe3Q9T2JqZWN0LmFzc2lnbih7Ym9keTplfHx7fX0sdCk7Y29uc3Qgcz17bWV0aG9kOlwiUE9TVFwiLHVybDpcIi9hcGkvY29sbGVjdGlvbnMvXCIrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY29sbGVjdGlvbklkT3JOYW1lKStcIi9yZWNvcmRzXCJ9O3RoaXMucHJlcGFyZVJlcXVlc3Qocyx0KSx0aGlzLnJlcXVlc3RzLnB1c2gocyl9dXBkYXRlKGUsdCxzKXtzPU9iamVjdC5hc3NpZ24oe2JvZHk6dHx8e319LHMpO2NvbnN0IGk9e21ldGhvZDpcIlBBVENIXCIsdXJsOlwiL2FwaS9jb2xsZWN0aW9ucy9cIitlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb2xsZWN0aW9uSWRPck5hbWUpK1wiL3JlY29yZHMvXCIrZW5jb2RlVVJJQ29tcG9uZW50KGUpfTt0aGlzLnByZXBhcmVSZXF1ZXN0KGkscyksdGhpcy5yZXF1ZXN0cy5wdXNoKGkpfWRlbGV0ZShlLHQpe3Q9T2JqZWN0LmFzc2lnbih7fSx0KTtjb25zdCBzPXttZXRob2Q6XCJERUxFVEVcIix1cmw6XCIvYXBpL2NvbGxlY3Rpb25zL1wiK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbGxlY3Rpb25JZE9yTmFtZSkrXCIvcmVjb3Jkcy9cIitlbmNvZGVVUklDb21wb25lbnQoZSl9O3RoaXMucHJlcGFyZVJlcXVlc3Qocyx0KSx0aGlzLnJlcXVlc3RzLnB1c2gocyl9cHJlcGFyZVJlcXVlc3QoZSx0KXtpZihub3JtYWxpemVVbmtub3duUXVlcnlQYXJhbXModCksZS5oZWFkZXJzPXQuaGVhZGVycyxlLmpzb249e30sZS5maWxlcz17fSx2b2lkIDAhPT10LnF1ZXJ5KXtjb25zdCBzPXNlcmlhbGl6ZVF1ZXJ5UGFyYW1zKHQucXVlcnkpO3MmJihlLnVybCs9KGUudXJsLmluY2x1ZGVzKFwiP1wiKT9cIiZcIjpcIj9cIikrcyl9bGV0IHM9dC5ib2R5O2lzRm9ybURhdGEocykmJihzPWZ1bmN0aW9uIGNvbnZlcnRGb3JtRGF0YVRvT2JqZWN0KGUpe2xldCB0PXt9O3JldHVybiBlLmZvckVhY2goKChlLHMpPT57aWYoXCJAanNvblBheWxvYWRcIj09PXMmJlwic3RyaW5nXCI9PXR5cGVvZiBlKXRyeXtsZXQgcz1KU09OLnBhcnNlKGUpO09iamVjdC5hc3NpZ24odCxzKX1jYXRjaChlKXtjb25zb2xlLndhcm4oXCJAanNvblBheWxvYWQgZXJyb3I6XCIsZSl9ZWxzZSB2b2lkIDAhPT10W3NdPyhBcnJheS5pc0FycmF5KHRbc10pfHwodFtzXT1bdFtzXV0pLHRbc10ucHVzaChpbmZlckZvcm1EYXRhVmFsdWUoZSkpKTp0W3NdPWluZmVyRm9ybURhdGFWYWx1ZShlKX0pKSx0fShzKSk7Zm9yKGNvbnN0IHQgaW4gcyl7Y29uc3QgaT1zW3RdO2lmKGlzRmlsZShpKSllLmZpbGVzW3RdPWUuZmlsZXNbdF18fFtdLGUuZmlsZXNbdF0ucHVzaChpKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkoaSkpe2NvbnN0IHM9W10sbj1bXTtmb3IoY29uc3QgZSBvZiBpKWlzRmlsZShlKT9zLnB1c2goZSk6bi5wdXNoKGUpO2lmKHMubGVuZ3RoPjAmJnMubGVuZ3RoPT1pLmxlbmd0aCl7ZS5maWxlc1t0XT1lLmZpbGVzW3RdfHxbXTtmb3IobGV0IGkgb2YgcyllLmZpbGVzW3RdLnB1c2goaSl9ZWxzZSBpZihlLmpzb25bdF09bixzLmxlbmd0aD4wKXtsZXQgaT10O3Quc3RhcnRzV2l0aChcIitcIil8fHQuZW5kc1dpdGgoXCIrXCIpfHwoaSs9XCIrXCIpLGUuZmlsZXNbaV09ZS5maWxlc1tpXXx8W107Zm9yKGxldCB0IG9mIHMpZS5maWxlc1tpXS5wdXNoKHQpfX1lbHNlIGUuanNvblt0XT1pfX19Y2xhc3MgQ2xpZW50e2dldCBiYXNlVXJsKCl7cmV0dXJuIHRoaXMuYmFzZVVSTH1zZXQgYmFzZVVybChlKXt0aGlzLmJhc2VVUkw9ZX1jb25zdHJ1Y3RvcihlPVwiL1wiLHQscz1cImVuLVVTXCIpe3RoaXMuY2FuY2VsQ29udHJvbGxlcnM9e30sdGhpcy5yZWNvcmRTZXJ2aWNlcz17fSx0aGlzLmVuYWJsZUF1dG9DYW5jZWxsYXRpb249ITAsdGhpcy5iYXNlVVJMPWUsdGhpcy5sYW5nPXMsdD90aGlzLmF1dGhTdG9yZT10OlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5EZW5vP3RoaXMuYXV0aFN0b3JlPW5ldyBCYXNlQXV0aFN0b3JlOnRoaXMuYXV0aFN0b3JlPW5ldyBMb2NhbEF1dGhTdG9yZSx0aGlzLmNvbGxlY3Rpb25zPW5ldyBDb2xsZWN0aW9uU2VydmljZSh0aGlzKSx0aGlzLmZpbGVzPW5ldyBGaWxlU2VydmljZSh0aGlzKSx0aGlzLmxvZ3M9bmV3IExvZ1NlcnZpY2UodGhpcyksdGhpcy5zZXR0aW5ncz1uZXcgU2V0dGluZ3NTZXJ2aWNlKHRoaXMpLHRoaXMucmVhbHRpbWU9bmV3IFJlYWx0aW1lU2VydmljZSh0aGlzKSx0aGlzLmhlYWx0aD1uZXcgSGVhbHRoU2VydmljZSh0aGlzKSx0aGlzLmJhY2t1cHM9bmV3IEJhY2t1cFNlcnZpY2UodGhpcyl9Z2V0IGFkbWlucygpe3JldHVybiB0aGlzLmNvbGxlY3Rpb24oXCJfc3VwZXJ1c2Vyc1wiKX1jcmVhdGVCYXRjaCgpe3JldHVybiBuZXcgQmF0Y2hTZXJ2aWNlKHRoaXMpfWNvbGxlY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVjb3JkU2VydmljZXNbZV18fCh0aGlzLnJlY29yZFNlcnZpY2VzW2VdPW5ldyBSZWNvcmRTZXJ2aWNlKHRoaXMsZSkpLHRoaXMucmVjb3JkU2VydmljZXNbZV19YXV0b0NhbmNlbGxhdGlvbihlKXtyZXR1cm4gdGhpcy5lbmFibGVBdXRvQ2FuY2VsbGF0aW9uPSEhZSx0aGlzfWNhbmNlbFJlcXVlc3QoZSl7cmV0dXJuIHRoaXMuY2FuY2VsQ29udHJvbGxlcnNbZV0mJih0aGlzLmNhbmNlbENvbnRyb2xsZXJzW2VdLmFib3J0KCksZGVsZXRlIHRoaXMuY2FuY2VsQ29udHJvbGxlcnNbZV0pLHRoaXN9Y2FuY2VsQWxsUmVxdWVzdHMoKXtmb3IobGV0IGUgaW4gdGhpcy5jYW5jZWxDb250cm9sbGVycyl0aGlzLmNhbmNlbENvbnRyb2xsZXJzW2VdLmFib3J0KCk7cmV0dXJuIHRoaXMuY2FuY2VsQ29udHJvbGxlcnM9e30sdGhpc31maWx0ZXIoZSx0KXtpZighdClyZXR1cm4gZTtmb3IobGV0IHMgaW4gdCl7bGV0IGk9dFtzXTtzd2l0Y2godHlwZW9mIGkpe2Nhc2VcImJvb2xlYW5cIjpjYXNlXCJudW1iZXJcIjppPVwiXCIraTticmVhaztjYXNlXCJzdHJpbmdcIjppPVwiJ1wiK2kucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikrXCInXCI7YnJlYWs7ZGVmYXVsdDppPW51bGw9PT1pP1wibnVsbFwiOmkgaW5zdGFuY2VvZiBEYXRlP1wiJ1wiK2kudG9JU09TdHJpbmcoKS5yZXBsYWNlKFwiVFwiLFwiIFwiKStcIidcIjpcIidcIitKU09OLnN0cmluZ2lmeShpKS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKStcIidcIn1lPWUucmVwbGFjZUFsbChcIns6XCIrcytcIn1cIixpKX1yZXR1cm4gZX1nZXRGaWxlVXJsKGUsdCxzPXt9KXtyZXR1cm4gY29uc29sZS53YXJuKFwiUGxlYXNlIHJlcGxhY2UgcGIuZ2V0RmlsZVVybCgpIHdpdGggcGIuZmlsZXMuZ2V0VVJMKClcIiksdGhpcy5maWxlcy5nZXRVUkwoZSx0LHMpfWJ1aWxkVXJsKGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJQbGVhc2UgcmVwbGFjZSBwYi5idWlsZFVybCgpIHdpdGggcGIuYnVpbGRVUkwoKVwiKSx0aGlzLmJ1aWxkVVJMKGUpfWJ1aWxkVVJMKGUpe2xldCB0PXRoaXMuYmFzZVVSTDtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93fHwhd2luZG93LmxvY2F0aW9ufHx0LnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKXx8dC5zdGFydHNXaXRoKFwiaHR0cDovL1wiKXx8KHQ9d2luZG93LmxvY2F0aW9uLm9yaWdpbj8uZW5kc1dpdGgoXCIvXCIpP3dpbmRvdy5sb2NhdGlvbi5vcmlnaW4uc3Vic3RyaW5nKDAsd2luZG93LmxvY2F0aW9uLm9yaWdpbi5sZW5ndGgtMSk6d2luZG93LmxvY2F0aW9uLm9yaWdpbnx8XCJcIix0aGlzLmJhc2VVUkwuc3RhcnRzV2l0aChcIi9cIil8fCh0Kz13aW5kb3cubG9jYXRpb24ucGF0aG5hbWV8fFwiL1wiLHQrPXQuZW5kc1dpdGgoXCIvXCIpP1wiXCI6XCIvXCIpLHQrPXRoaXMuYmFzZVVSTCksZSYmKHQrPXQuZW5kc1dpdGgoXCIvXCIpP1wiXCI6XCIvXCIsdCs9ZS5zdGFydHNXaXRoKFwiL1wiKT9lLnN1YnN0cmluZygxKTplKSx0fWFzeW5jIHNlbmQoZSx0KXt0PXRoaXMuaW5pdFNlbmRPcHRpb25zKGUsdCk7bGV0IHM9dGhpcy5idWlsZFVSTChlKTtpZih0aGlzLmJlZm9yZVNlbmQpe2NvbnN0IGU9T2JqZWN0LmFzc2lnbih7fSxhd2FpdCB0aGlzLmJlZm9yZVNlbmQocyx0KSk7dm9pZCAwIT09ZS51cmx8fHZvaWQgMCE9PWUub3B0aW9ucz8ocz1lLnVybHx8cyx0PWUub3B0aW9uc3x8dCk6T2JqZWN0LmtleXMoZSkubGVuZ3RoJiYodD1lLGNvbnNvbGU/Lndhcm4mJmNvbnNvbGUud2FybihcIkRlcHJlY2F0ZWQgZm9ybWF0IG9mIGJlZm9yZVNlbmQgcmV0dXJuOiBwbGVhc2UgdXNlIGByZXR1cm4geyB1cmwsIG9wdGlvbnMgfWAsIGluc3RlYWQgb2YgYHJldHVybiBvcHRpb25zYC5cIikpfWlmKHZvaWQgMCE9PXQucXVlcnkpe2NvbnN0IGU9c2VyaWFsaXplUXVlcnlQYXJhbXModC5xdWVyeSk7ZSYmKHMrPShzLmluY2x1ZGVzKFwiP1wiKT9cIiZcIjpcIj9cIikrZSksZGVsZXRlIHQucXVlcnl9XCJhcHBsaWNhdGlvbi9qc29uXCI9PXRoaXMuZ2V0SGVhZGVyKHQuaGVhZGVycyxcIkNvbnRlbnQtVHlwZVwiKSYmdC5ib2R5JiZcInN0cmluZ1wiIT10eXBlb2YgdC5ib2R5JiYodC5ib2R5PUpTT04uc3RyaW5naWZ5KHQuYm9keSkpO3JldHVybih0LmZldGNofHxmZXRjaCkocyx0KS50aGVuKChhc3luYyBlPT57bGV0IHM9e307dHJ5e3M9YXdhaXQgZS5qc29uKCl9Y2F0Y2goZSl7fWlmKHRoaXMuYWZ0ZXJTZW5kJiYocz1hd2FpdCB0aGlzLmFmdGVyU2VuZChlLHMsdCkpLGUuc3RhdHVzPj00MDApdGhyb3cgbmV3IENsaWVudFJlc3BvbnNlRXJyb3Ioe3VybDplLnVybCxzdGF0dXM6ZS5zdGF0dXMsZGF0YTpzfSk7cmV0dXJuIHN9KSkuY2F0Y2goKGU9Pnt0aHJvdyBuZXcgQ2xpZW50UmVzcG9uc2VFcnJvcihlKX0pKX1pbml0U2VuZE9wdGlvbnMoZSx0KXtpZigodD1PYmplY3QuYXNzaWduKHttZXRob2Q6XCJHRVRcIn0sdCkpLmJvZHk9ZnVuY3Rpb24gY29udmVydFRvRm9ybURhdGFJZk5lZWRlZChlKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgRm9ybURhdGF8fHZvaWQgMD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZXx8aXNGb3JtRGF0YShlKXx8IWhhc0ZpbGVGaWVsZChlKSlyZXR1cm4gZTtjb25zdCB0PW5ldyBGb3JtRGF0YTtmb3IoY29uc3QgcyBpbiBlKXtjb25zdCBpPWVbc107aWYoXCJvYmplY3RcIiE9dHlwZW9mIGl8fGhhc0ZpbGVGaWVsZCh7ZGF0YTppfSkpe2NvbnN0IGU9QXJyYXkuaXNBcnJheShpKT9pOltpXTtmb3IobGV0IGkgb2YgZSl0LmFwcGVuZChzLGkpfWVsc2V7bGV0IGU9e307ZVtzXT1pLHQuYXBwZW5kKFwiQGpzb25QYXlsb2FkXCIsSlNPTi5zdHJpbmdpZnkoZSkpfX1yZXR1cm4gdH0odC5ib2R5KSxub3JtYWxpemVVbmtub3duUXVlcnlQYXJhbXModCksdC5xdWVyeT1PYmplY3QuYXNzaWduKHt9LHQucGFyYW1zLHQucXVlcnkpLHZvaWQgMD09PXQucmVxdWVzdEtleSYmKCExPT09dC4kYXV0b0NhbmNlbHx8ITE9PT10LnF1ZXJ5LiRhdXRvQ2FuY2VsP3QucmVxdWVzdEtleT1udWxsOih0LiRjYW5jZWxLZXl8fHQucXVlcnkuJGNhbmNlbEtleSkmJih0LnJlcXVlc3RLZXk9dC4kY2FuY2VsS2V5fHx0LnF1ZXJ5LiRjYW5jZWxLZXkpKSxkZWxldGUgdC4kYXV0b0NhbmNlbCxkZWxldGUgdC5xdWVyeS4kYXV0b0NhbmNlbCxkZWxldGUgdC4kY2FuY2VsS2V5LGRlbGV0ZSB0LnF1ZXJ5LiRjYW5jZWxLZXksbnVsbCE9PXRoaXMuZ2V0SGVhZGVyKHQuaGVhZGVycyxcIkNvbnRlbnQtVHlwZVwiKXx8aXNGb3JtRGF0YSh0LmJvZHkpfHwodC5oZWFkZXJzPU9iamVjdC5hc3NpZ24oe30sdC5oZWFkZXJzLHtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifSkpLG51bGw9PT10aGlzLmdldEhlYWRlcih0LmhlYWRlcnMsXCJBY2NlcHQtTGFuZ3VhZ2VcIikmJih0LmhlYWRlcnM9T2JqZWN0LmFzc2lnbih7fSx0LmhlYWRlcnMse1wiQWNjZXB0LUxhbmd1YWdlXCI6dGhpcy5sYW5nfSkpLHRoaXMuYXV0aFN0b3JlLnRva2VuJiZudWxsPT09dGhpcy5nZXRIZWFkZXIodC5oZWFkZXJzLFwiQXV0aG9yaXphdGlvblwiKSYmKHQuaGVhZGVycz1PYmplY3QuYXNzaWduKHt9LHQuaGVhZGVycyx7QXV0aG9yaXphdGlvbjp0aGlzLmF1dGhTdG9yZS50b2tlbn0pKSx0aGlzLmVuYWJsZUF1dG9DYW5jZWxsYXRpb24mJm51bGwhPT10LnJlcXVlc3RLZXkpe2NvbnN0IHM9dC5yZXF1ZXN0S2V5fHwodC5tZXRob2R8fFwiR0VUXCIpK2U7ZGVsZXRlIHQucmVxdWVzdEtleSx0aGlzLmNhbmNlbFJlcXVlc3Qocyk7Y29uc3QgaT1uZXcgQWJvcnRDb250cm9sbGVyO3RoaXMuY2FuY2VsQ29udHJvbGxlcnNbc109aSx0LnNpZ25hbD1pLnNpZ25hbH1yZXR1cm4gdH1nZXRIZWFkZXIoZSx0KXtlPWV8fHt9LHQ9dC50b0xvd2VyQ2FzZSgpO2ZvcihsZXQgcyBpbiBlKWlmKHMudG9Mb3dlckNhc2UoKT09dClyZXR1cm4gZVtzXTtyZXR1cm4gbnVsbH19Y2xhc3MgQXN5bmNBdXRoU3RvcmUgZXh0ZW5kcyBCYXNlQXV0aFN0b3Jle2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5xdWV1ZT1bXSx0aGlzLnNhdmVGdW5jPWUuc2F2ZSx0aGlzLmNsZWFyRnVuYz1lLmNsZWFyLHRoaXMuX2VucXVldWUoKCgpPT50aGlzLl9sb2FkSW5pdGlhbChlLmluaXRpYWwpKSl9c2F2ZShlLHQpe3N1cGVyLnNhdmUoZSx0KTtsZXQgcz1cIlwiO3RyeXtzPUpTT04uc3RyaW5naWZ5KHt0b2tlbjplLHJlY29yZDp0fSl9Y2F0Y2goZSl7Y29uc29sZS53YXJuKFwiQXN5bmNBdXRoU3RvcmU6IGZhaWxlZCB0byBzdHJpbmdpZnkgdGhlIG5ldyBzdGF0ZVwiKX10aGlzLl9lbnF1ZXVlKCgoKT0+dGhpcy5zYXZlRnVuYyhzKSkpfWNsZWFyKCl7c3VwZXIuY2xlYXIoKSx0aGlzLmNsZWFyRnVuYz90aGlzLl9lbnF1ZXVlKCgoKT0+dGhpcy5jbGVhckZ1bmMoKSkpOnRoaXMuX2VucXVldWUoKCgpPT50aGlzLnNhdmVGdW5jKFwiXCIpKSl9YXN5bmMgX2xvYWRJbml0aWFsKGUpe3RyeXtpZihlPWF3YWl0IGUpe2xldCB0O1wic3RyaW5nXCI9PXR5cGVvZiBlP3Q9SlNPTi5wYXJzZShlKXx8e306XCJvYmplY3RcIj09dHlwZW9mIGUmJih0PWUpLHRoaXMuc2F2ZSh0LnRva2VufHxcIlwiLHQucmVjb3JkfHx0Lm1vZGVsfHxudWxsKX19Y2F0Y2goZSl7fX1fZW5xdWV1ZShlKXt0aGlzLnF1ZXVlLnB1c2goZSksMT09dGhpcy5xdWV1ZS5sZW5ndGgmJnRoaXMuX2RlcXVldWUoKX1fZGVxdWV1ZSgpe3RoaXMucXVldWUubGVuZ3RoJiZ0aGlzLnF1ZXVlWzBdKCkuZmluYWxseSgoKCk9Pnt0aGlzLnF1ZXVlLnNoaWZ0KCksdGhpcy5xdWV1ZS5sZW5ndGgmJnRoaXMuX2RlcXVldWUoKX0pKX19ZXhwb3J0e0FzeW5jQXV0aFN0b3JlLEJhc2VBdXRoU3RvcmUsQmF0Y2hTZXJ2aWNlLENsaWVudFJlc3BvbnNlRXJyb3IsQ29sbGVjdGlvblNlcnZpY2UsQ3J1ZFNlcnZpY2UsSGVhbHRoU2VydmljZSxMb2NhbEF1dGhTdG9yZSxMb2dTZXJ2aWNlLFJlYWx0aW1lU2VydmljZSxSZWNvcmRTZXJ2aWNlLFN1YkJhdGNoU2VydmljZSxjb29raWVQYXJzZSxjb29raWVTZXJpYWxpemUsQ2xpZW50IGFzIGRlZmF1bHQsZ2V0VG9rZW5QYXlsb2FkLGlzVG9rZW5FeHBpcmVkLG5vcm1hbGl6ZVVua25vd25RdWVyeVBhcmFtcyxzZXJpYWxpemVRdWVyeVBhcmFtc307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb2NrZXRiYXNlLmVzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/pocketbase/dist/pocketbase.es.mjs\n");

/***/ })

};
;